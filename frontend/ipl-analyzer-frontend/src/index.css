:root {
  /* New Page Gradient Variables - Light Mode */
  --gradient-page-start-color: #FF8C00; /* Dark Orange */
  --gradient-page-end-color: #4682B4;   /* Steel Blue */
  --header-text-color-light: #FFFFFF;
  --header-text-color: var(--header-text-color-light); /* General header text color */

  /* Orange & Blue Glassmorphic - Light Mode */
  --glass-bg-gradient-start-color: rgba(255, 165, 0, 0.5);  /* Light Orange, semi-transparent */
  --glass-bg-gradient-end-color: rgba(135, 206, 235, 0.4); /* Sky Blue, semi-transparent */
  --glass-border-color: rgba(70, 130, 180, 0.4); /* Steel Blue, low opacity for borders */
  --glass-shadow-color-soft: rgba(0, 0, 0, 0.1);
  --glass-shadow-color-strong: rgba(0, 0, 0, 0.15);
  --glass-blur-intensity: 10px;
  --glass-text-color: #1A2A3A;    /* Dark Blue-Gray */
  --glass-heading-color: #005A9C; /* Stronger Blue for headings on glass */
  --glass-border-radius: 14px;

  --primary-color: #FF6F00; /* Vibrant Orange */
  --primary-hover-color: #FF8F00; /* Lighter Vibrant Orange */
  --on-primary-text-color: #FFFFFF;

  --text-color: var(--glass-text-color);
  --text-muted-color: #5A6F80; /* Muted Blue-Gray */
  --background-color: transparent; /* Page background is gradient */
  --surface-color: transparent;    /* Surfaces are glass */
  --border-color: var(--glass-border-color); /* General border for non-glass elements if any */
  
  --button-glass-bg-start-color: rgba(255, 175, 20, 0.4);
  --button-glass-bg-end-color: rgba(155, 216, 245, 0.3);
  --button-glass-text-color: var(--glass-text-color);
  --button-border-color: var(--glass-border-color);

  --input-glass-bg-color: rgba(220, 235, 245, 0.4); /* Very light blue, semi-transparent */
  --input-glass-text-color: var(--glass-text-color);
  --input-glass-border-color: var(--glass-border-color);

  /* Kept from previous theme for compatibility, can be reviewed */
  --secondary-color: #6c757d; 
  --accent-color-success: #28a745;
  --accent-color-warning: #ffc107;
  --accent-color-warning-text: #212529;
  --accent-color-info: #17a2b8;
  --table-header-bg: #e9ecef; /* Will be overridden by new table styles */
  --table-row-even-bg: var(--background-color); /* Will be overridden */
  --table-row-hover-bg: #ddeeff; /* Will be overridden */
  --control-bg: #e9ecef; /* To be reviewed if control containers become glass */
  --input-bg: var(--surface-color); /* Overridden by input-glass-bg-color */
  --input-text-color: var(--text-color); /* Overridden by input-glass-text-color */
  --input-border-color: var(--border-color); /* Overridden by input-glass-border-color */
  --button-text-color: var(--on-primary-text-color); /* Default button text on primary bg */
  --disabled-bg-color: var(--secondary-color);
  --disabled-text-color: #e9ecef;
  --footer-bg-color: #343a40; /* Consider making footer glass or themed */
  --footer-text-color: #f8f9fa;
  --box-shadow-light: 0 2px 5px rgba(0, 0, 0, 0.07); /* Replaced by glass shadows for cards */
  --box-shadow-medium: 0 4px 10px rgba(0, 0, 0, 0.1); /* Replaced by glass shadows for cards */
  --link-color: var(--primary-color);
  --link-hover-color: var(--primary-hover-color);
  --loading-message-bg: var(--accent-color-info);
  --loading-message-text: #FFFFFF;
  --loading-message-border: #117a8b;
  --error-message-bg: #f8d7da;
  --error-message-text: #721c24;
  --error-message-border: #f5c6cb;

  /* Dark Theme Variable Placeholders (values defined in html[data-theme="dark"]) */
  --gradient-page-start-color-dark: #D2691E;
  --gradient-page-end-color-dark: #2C3E50;
  --header-text-color-dark: #E0E0E0;
  --glass-bg-gradient-start-color-dark: rgba(40, 58, 71, 0.65);
  --glass-bg-gradient-end-color-dark: rgba(200, 100, 0, 0.55);
  --glass-border-color-dark: rgba(255, 140, 0, 0.3);
  --glass-shadow-color-soft-dark: rgba(0, 0, 0, 0.25);
  --glass-shadow-color-strong-dark: rgba(0, 0, 0, 0.35);
  --glass-text-color-dark: #EAEAEA;
  --glass-heading-color-dark: #FFA500;
  --primary-color-dark: #FFA500;
  --primary-hover-color-dark: #FFB733;
  --on-primary-text-color-dark: #1A2A3A;
  --text-muted-color-dark: #9EADBA;
  --button-glass-bg-start-color-dark: rgba(50, 68, 81, 0.5);
  --button-glass-bg-end-color-dark: rgba(210, 110, 10, 0.4);
  --button-border-color-dark: var(--glass-border-color-dark);
  --input-glass-bg-color-dark: rgba(26, 42, 58, 0.5);
  --input-glass-border-color-dark: var(--glass-border-color-dark);
  /* Keep other dark theme specific vars like accent colors, footer, etc. */
  --accent-color-success-dark: #28a745; 
  --accent-color-warning-dark: #b8860b; 
  --accent-color-warning-text-dark: var(--glass-text-color-dark);
  --accent-color-info-dark: #17a2b8; 
  --table-header-bg-dark: #2c2c2c;
  --table-row-even-bg-dark: #252525;
  --table-row-hover-bg-dark: #3a3a3a;
  --control-bg-dark: #2c2c2c;
  --disabled-bg-color-dark: #495057;
  --disabled-text-color-dark: #adb5bd;
  --footer-bg-color-dark: #212529;
  --footer-text-color-dark: #ced4da;
  --link-color-dark: #FFB733; /* Updated link color for dark */
  --link-hover-color-dark: #FFA500; /* Updated link hover for dark */
  --loading-message-bg-dark: var(--accent-color-info-dark);
  --loading-message-text-dark: var(--glass-text-color-dark);
  --loading-message-border-dark: #106777;
  --error-message-bg-dark: #58181F;
  --error-message-text-dark: #F8D7DA;
  --error-message-border-dark: #721c24;

  /* Fonts */
  --font-family-sans-serif: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
  --font-family-monospace: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;

  /* Spacing & Sizing */
  --spacing-unit: 8px;
  --border-radius: var(--glass-border-radius); /* Global radius to use glass radius */
  --max-content-width: 1280px;
}

/* Global Resets & Defaults */
*,
*::before,
*::after {
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  font-family: var(--font-family-sans-serif);
  margin: 0;
  padding: 0;
  background-color: var(--background-color); 
  color: var(--text-color);
  line-height: 1.65; 
  font-size: 16px; 
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  min-height: 100vh;
  background-image: linear-gradient(135deg, var(--gradient-page-start-color), var(--gradient-page-end-color));
  background-size: 200% 200%; 
  animation: pageGradientAnimation 20s ease infinite;
}

@keyframes pageGradientAnimation {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

#root {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  background-color:transparent; /* Ensure #root is transparent */
}

/* App Container */
#app-container {
  max-width: var(--max-content-width);
  margin: 0 auto;
  padding: calc(var(--spacing-unit) * 2) calc(var(--spacing-unit) * 3);
  width: 100%;
  flex-grow: 1;
}

/* Header */
header {
  /* background: transparent; /* REMOVED - Header is part of page gradient */
  /* color: var(--header-text-color-light); /* REMOVED - h1 handles its own color */
  padding: calc(var(--spacing-unit) * 2.5) 0; 
  text-align: center;
  border-radius: var(--glass-border-radius); /* UPDATED */
  margin-bottom: calc(var(--spacing-unit) * 4); 
  /* box-shadow: none; /* REMOVED */
  border-bottom: 1px solid var(--glass-border-color); /* ADDED */
}

header h1 {
  margin: 0;
  font-size: 2.25rem; 
  font-weight: 700;
  letter-spacing: -0.5px;
  color: var(--header-text-color); /* ADDED/UPDATED */
}

/* Sections */
section {
  margin-bottom: calc(var(--spacing-unit) * 4); 
  /* Styles removed as GlassCard is used */
}

section h2 {
  margin-top: 0;
  margin-bottom: calc(var(--spacing-unit) * 2.5); 
  color: var(--glass-heading-color); /* This was already changed as per previous plan */
  border-bottom: 2px solid var(--primary-color); /* CHANGED from 3px to 2px */
  padding-bottom: calc(var(--spacing-unit) * 1.5); 
  font-size: 1.85rem; 
  font-weight: 600;
}

section h3 {
  margin-top: calc(var(--spacing-unit) * 2); 
  margin-bottom: calc(var(--spacing-unit) * 1.5); 
  font-size: 1.5rem; 
  color: var(--glass-text-color); /* Use glass text color */
  font-weight: 600;
}

section h4 {
  margin-top: var(--spacing-unit) * 1.5; 
  margin-bottom: var(--spacing-unit); 
  font-size: 1.2rem; 
  color: var(--text-muted-color); /* Use general muted text */
  font-weight: 600;
}

/* Generic Table Styling for Glassmorphism */
.table-responsive {
  overflow-x: auto;
  width: 100%;
  margin-top: calc(var(--spacing-unit) * 2);
  border-radius: calc(var(--glass-border-radius) - 8px); /* Keep this from previous glass refinement */
  overflow: hidden; 
  background-color: color-mix(in srgb, var(--glass-bg-gradient-start-color) 15%, transparent); /* UPDATED */
  border: 1px solid var(--glass-border-color);
}
table {
  width: 100%;
  border-collapse: separate; 
  border-spacing: 0;
  background-color: transparent;
}

th, td {
  padding: calc(var(--spacing-unit) * 1.5);
  text-align: left;
  vertical-align: middle;
  border: none; 
  border-bottom: 1px solid var(--glass-border-color); 
  color: var(--glass-text-color);
  text-shadow: 1px 1px 2px color-mix(in srgb, var(--glass-text-color) 30%, black); /* ADDED "3D" effect */
}
td:first-child, th:first-child {
    padding-left: calc(var(--spacing-unit) * 2); 
}
td:last-child, th:last-child {
    padding-right: calc(var(--spacing-unit) * 2);
}

th {
  /* background: linear-gradient(135deg, var(--glass-bg-gradient-start-color), var(--glass-bg-gradient-end-color)); /* REMOVED old gradient */
  background-color: color-mix(in srgb, var(--glass-bg-gradient-end-color) 20%, transparent); /* UPDATED */
  font-weight: 700;
  white-space: nowrap;
  border-bottom-width: 2px; 
  border-bottom-color: var(--primary-color); /* Kept as per instruction */
}

tbody tr:nth-child(even) {
  /* background-color: color-mix(in srgb, var(--glass-bg-gradient-start-color) 10%, transparent); /* REMOVED old striping */
  background-color: transparent; /* UPDATED - removing striping */
}

tbody tr:hover {
  /* background-color: color-mix(in srgb, var(--primary-color) 20%, var(--glass-bg-gradient-end-color) 30%); /* REMOVED old hover */
  background-color: color-mix(in srgb, var(--primary-color) 15%, transparent); /* UPDATED */
}

table caption {
  caption-side: top;
  font-size: 1.1em;
  font-weight: 600;
  color: var(--text-muted-color);
  padding: var(--spacing-unit);
  text-align: left;
}

/* Form Elements */
.analysis-controls,
.qualification-path-controls,
.simulation-controls {
  display: flex;
  flex-wrap: wrap;
  gap: calc(var(--spacing-unit) * 2.5); 
  margin-bottom: calc(var(--spacing-unit) * 3); 
  padding: calc(var(--spacing-unit) * 2); 
  background: linear-gradient(135deg, var(--glass-bg-gradient-start-color), var(--glass-bg-gradient-end-color));
  border-radius: var(--glass-border-radius);
  border: 1px solid var(--glass-border-color);
  backdrop-filter: blur(var(--glass-blur-intensity));
  -webkit-backdrop-filter: blur(var(--glass-blur-intensity));
  box-shadow: var(--glass-shadow-color-soft) 0 4px 6px;
  align-items: center;
}

.control-group {
  display: flex;
  align-items: center;
  gap: var(--spacing-unit); 
}

.control-group label, fieldset legend {
  font-weight: 600; 
  color: var(--glass-text-color);
  margin-right: calc(var(--spacing-unit) * 0.5); 
  font-size: 0.95em; 
}
fieldset {
    border: none;
    padding: 0;
    margin: 0;
    background: transparent; /* Ensure fieldset itself is transparent */
}
fieldset.control-group { 
    gap: var(--spacing-unit) * 1.5; 
}
fieldset legend {
    padding: 0 0 calc(var(--spacing-unit) * 0.5) 0; 
    margin-bottom: calc(var(--spacing-unit) * 0.5);
}

select,
input[type="text"],
input[type="number"],
textarea {
  padding: calc(var(--spacing-unit) * 1.25) calc(var(--spacing-unit) * 1.5); 
  border-radius: calc(var(--glass-border-radius) / 2); 
  border: 1px solid var(--input-glass-border-color);
  background-color: var(--input-glass-bg-color);
  font-size: 1em;
  color: var(--input-glass-text-color);
  transition: border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out, background-color 0.2s ease;
  min-width: 180px; 
  backdrop-filter: blur(calc(var(--glass-blur-intensity) / 3));
  -webkit-backdrop-filter: blur(calc(var(--glass-blur-intensity) / 3));
  box-shadow: inset 0 1px 2px rgba(0,0,0,0.075); 
}

select:focus,
input[type="text"]:focus,
input[type="number"]:focus,
textarea:focus {
  border-color: var(--primary-color);
  outline: 0;
  box-shadow: 0 0 0 0.25rem color-mix(in srgb, var(--primary-color) 30%, transparent); 
  background-color: color-mix(in srgb, var(--input-glass-bg-color) 80%, var(--glass-bg-gradient-end-color) 20%); 
}

input[type="radio"],
input[type="checkbox"] {
  margin-right: calc(var(--spacing-unit) * 0.75); 
  accent-color: var(--primary-color); 
  transform: scale(1.1); 
}

.control-group label[for*="-radio"],
.control-group label[for*="-checkbox"] {
  margin-right: var(--spacing-unit); 
  font-weight: normal; 
  color: var(--glass-text-color); /* Ensure these labels also use glass text color */
}

button, .button {
  padding: calc(var(--spacing-unit) * 1.25) calc(var(--spacing-unit) * 2.5); 
  border: 1px solid var(--button-border-color);
  border-radius: var(--border-radius); 
  background: linear-gradient(135deg, var(--button-glass-bg-start-color), var(--button-glass-bg-end-color));
  color: var(--button-glass-text-color);
  font-size: 1em;
  font-weight: 600; 
  cursor: pointer;
  transition: background-color 0.2s ease-in-out, border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out, transform 0.1s ease;
  text-align: center;
  display: inline-block;
  text-decoration: none;
  white-space: nowrap; 
  backdrop-filter: blur(calc(var(--glass-blur-intensity) / 2));
  -webkit-backdrop-filter: blur(calc(var(--glass-blur-intensity) / 2));
  box-shadow: 0 2px 4px var(--glass-shadow-color-soft);
}
button:hover, .button:hover {
  background: linear-gradient(135deg, color-mix(in srgb, var(--button-glass-bg-start-color) 80%, var(--primary-color) 20%), color-mix(in srgb, var(--button-glass-bg-end-color) 80%, var(--primary-color) 20%));
  border-color: var(--primary-color);
  box-shadow: 0 3px 6px var(--glass-shadow-color-strong);
}
button:active, .button:active {
    transform: translateY(1px);
    box-shadow: 0 1px 2px var(--glass-shadow-color-strong);
}
button:focus-visible, .button:focus-visible { 
  outline: 2px solid var(--primary-color);
  outline-offset: 2px;
  box-shadow: 0 0 0 0.25rem color-mix(in srgb, var(--primary-color) 30%, transparent);
}

button:disabled, .button:disabled {
  background: color-mix(in srgb, var(--button-glass-bg-start-color) 40%, #888888 60%); /* More muted */
  border-color: color-mix(in srgb, var(--glass-border-color) 50%, #888888 50%);
  color: color-mix(in srgb, var(--button-glass-text-color) 50%, #777777 50%);
  cursor: not-allowed;
  opacity: 0.6; 
  box-shadow: none;
  transform: none;
  backdrop-filter: none;
}

button.success, .button.success {
  background: linear-gradient(135deg, color-mix(in srgb, var(--button-glass-bg-start-color) 70%, var(--accent-color-success) 30%), color-mix(in srgb, var(--button-glass-bg-end-color) 70%, var(--accent-color-success) 30%));
  border-color: var(--accent-color-success);
  color: var(--on-primary-text-color); /* Assuming success buttons use primary-like text contrast */
}
button.success:hover, .button.success:hover {
  background: linear-gradient(135deg, color-mix(in srgb, var(--button-glass-bg-start-color) 50%, var(--accent-color-success) 50%), color-mix(in srgb, var(--button-glass-bg-end-color) 50%, var(--accent-color-success) 50%));
  border-color: color-mix(in srgb, var(--accent-color-success) 80%, #000000 20%);
}
button.warning, .button.warning {
  background: linear-gradient(135deg, color-mix(in srgb, var(--button-glass-bg-start-color) 70%, var(--accent-color-warning) 30%), color-mix(in srgb, var(--button-glass-bg-end-color) 70%, var(--accent-color-warning) 30%));
  border-color: var(--accent-color-warning);
  color: var(--accent-color-warning-text); 
}
button.warning:hover, .button.warning:hover {
  background: linear-gradient(135deg, color-mix(in srgb, var(--button-glass-bg-start-color) 50%, var(--accent-color-warning) 50%), color-mix(in srgb, var(--button-glass-bg-end-color) 50%, var(--accent-color-warning) 50%));
  border-color: color-mix(in srgb, var(--accent-color-warning) 80%, #000000 20%);
}


/* Utilities */
.text-center { text-align: center; }
.mb-1 { margin-bottom: var(--spacing-unit); } 
.mb-2 { margin-bottom: calc(var(--spacing-unit) * 2); } 
.mb-3 { margin-bottom: calc(var(--spacing-unit) * 3); } 
.mt-1 { margin-top: var(--spacing-unit); }
.mt-2 { margin-top: calc(var(--spacing-unit) * 2); }
.mt-3 { margin-top: calc(var(--spacing-unit) * 3); }
.text-warning { 
  color: var(--accent-color-warning-text); 
  background-color: color-mix(in srgb, var(--accent-color-warning) 70%, transparent); 
  padding: var(--spacing-unit); 
  border-radius: var(--border-radius); 
  border: 1px solid var(--accent-color-warning);
}

/* Current Standings Metadata */
#current-standings .metadata p {
  margin-bottom: calc(var(--spacing-unit) * 0.75); 
  font-size: 0.9em;
  color: var(--text-muted-color);
}

/* Scenario Simulation Specifics */
#scenario-simulation .simulation-message {
  margin-top: var(--spacing-unit);
  padding: calc(var(--spacing-unit) * 1.5); 
  background-color: color-mix(in srgb, var(--accent-color-warning) 70%, transparent); 
  border: 1px solid var(--accent-color-warning); 
  border-radius: var(--border-radius);
  color: var(--accent-color-warning-text); 
  font-weight: 500;
}

#scenario-simulation .simulation-results-container {
  display: flex;
  gap: calc(var(--spacing-unit) * 3); 
  margin-top: calc(var(--spacing-unit) * 2.5); 
  flex-wrap: wrap;
}

#scenario-simulation .match-log-container,
#scenario-simulation .final-standings-container {
  flex: 1;
  min-width: 320px; 
  /* Uses GlassCard, so no specific bg/border/shadow here */
}

#scenario-simulation textarea {
  width: 100%;
  padding: var(--spacing-unit); 
  border-radius: calc(var(--glass-border-radius) / 2);
  border: 1px solid var(--input-glass-border-color); 
  font-family: var(--font-family-monospace);
  font-size: 0.95em; 
  background-color: var(--input-glass-bg-color); 
  color: var(--input-glass-text-color); 
  min-height: 250px; 
  resize: vertical;
  box-shadow: inset 0 1px 2px rgba(0,0,0,0.075);
  backdrop-filter: blur(calc(var(--glass-blur-intensity) / 3));
  -webkit-backdrop-filter: blur(calc(var(--glass-blur-intensity) / 3));
}

/* Qualification Path Specifics */
#qualification-path .qualification-path-results p {
  margin-bottom: var(--spacing-unit);
  font-size: 1.05em; 
}
#qualification-path .qualification-path-results strong {
  color: var(--primary-hover-color);
}
#qualification-path .metadata .text-warning { 
    font-size: 0.9em;
    margin-top: var(--spacing-unit);
}

/* Chart Container (OverallProbabilities) */
#overall-probabilities > div > div[style*="flex: 1"] { /* Targets the flex children from OverallProbabilities */
    /* Uses GlassCard, so no specific bg/border/shadow here */
    padding: var(--spacing-unit); /* Keep padding if needed around chart canvas */
}
#overall-probabilities .metadata p {
  margin-bottom: calc(var(--spacing-unit) * 0.75); 
  font-size: 0.9em;
  color: var(--text-muted-color);
}


/* Footer */
footer {
  text-align: center;
  padding: calc(var(--spacing-unit) * 3) 0; 
  margin-top: calc(var(--spacing-unit) * 4); 
  background-color: color-mix(in srgb, var(--glass-text-color) 85%, transparent); /* Darker, themed footer */
  color: var(--gradient-page-start-color); /* Contrasting text */
  border-top: 3px solid var(--primary-color);
}
footer p {
  margin: calc(var(--spacing-unit) * 0.5) 0; 
  font-size: 0.9em;
}

/* ARIA Live Regions - Basic Styling for Visibility */
p[role="status"], p[role="alert"] { 
    padding: calc(var(--spacing-unit) * 1.5);
    margin-top: var(--spacing-unit);
    border-radius: var(--border-radius);
    font-weight: 500;
    backdrop-filter: blur(var(--glass-blur-intensity));
    -webkit-backdrop-filter: blur(var(--glass-blur-intensity));
    border: 1px solid;
}
p[role="status"] { 
    background-color: color-mix(in srgb, var(--accent-color-info) 60%, transparent);
    color: var(--glass-text-color); 
    border-color: var(--accent-color-info); 
}
p[role="alert"] { 
    background-color: color-mix(in srgb, var(--error-message-bg) 60%, var(--glass-bg-gradient-start-color) 30%);
    color: var(--error-message-text); 
    border-color: var(--error-message-border); 
}

html[data-theme="light"] {
  /* Page Gradient */
  --gradient-page-start-color: #FF8C00;
  --gradient-page-end-color: #4682B4;
  --header-text-color: var(--header-text-color-light); /* Ensures it's explicitly set for light */

  /* Glassmorphic & General - Light Mode */
  --glass-bg-gradient-start-color: rgba(255, 165, 0, 0.5);
  --glass-bg-gradient-end-color: rgba(135, 206, 235, 0.4);
  --glass-border-color: rgba(70, 130, 180, 0.4);
  --glass-shadow-color-soft: rgba(0, 0, 0, 0.1);
  --glass-shadow-color-strong: rgba(0, 0, 0, 0.15);
  --glass-blur-intensity: 10px;
  --glass-text-color: #1A2A3A;
  --glass-heading-color: #005A9C;
  --glass-border-radius: 14px;

  --primary-color: #FF6F00;
  --primary-hover-color: #FF8F00;
  --on-primary-text-color: #FFFFFF;

  --text-color: var(--glass-text-color);
  --text-muted-color: #5A6F80;
  --background-color: transparent;
  --surface-color: transparent;
  --border-color: var(--glass-border-color);
  
  --button-glass-bg-start-color: rgba(255, 175, 20, 0.4);
  --button-glass-bg-end-color: rgba(155, 216, 245, 0.3);
  --button-glass-text-color: var(--glass-text-color);
  --button-border-color: var(--glass-border-color);

  --input-glass-bg-color: rgba(220, 235, 245, 0.4);
  --input-glass-text-color: var(--glass-text-color);
  --input-glass-border-color: var(--glass-border-color);

  /* Kept from previous theme for compatibility, can be reviewed */
  --secondary-color: #6c757d; 
  --accent-color-success: #28a745;
  --accent-color-warning: #ffc107;
  --accent-color-warning-text: #212529;
  --accent-color-info: #17a2b8;
  --disabled-bg-color: var(--secondary-color);
  --disabled-text-color: #e9ecef;
  --footer-bg-color: #343a40;
  --footer-text-color: #f8f9fa;
  --link-color: var(--primary-color);
  --link-hover-color: var(--primary-hover-color);
  --loading-message-bg: var(--accent-color-info);
  --loading-message-text: #FFFFFF;
  --loading-message-border: #117a8b;
  --error-message-bg: #f8d7da;
  --error-message-text: #721c24;
  --error-message-border: #f5c6cb;
  
  /* Fonts & other base vars copied from :root */
  --font-family-sans-serif: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
  --font-family-monospace: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  --spacing-unit: 8px;
  --border-radius: var(--glass-border-radius);
  --max-content-width: 1280px;
}

html[data-theme="dark"] {
  /* Page Gradient */
  --gradient-page-start-color: var(--gradient-page-start-color-dark);
  --gradient-page-end-color: var(--gradient-page-end-color-dark);
  --header-text-color: var(--header-text-color-dark); /* Ensures it's explicitly set for dark */

  /* Glassmorphic & General - Dark Mode */
  --glass-bg-gradient-start-color: var(--glass-bg-gradient-start-color-dark);
  --glass-bg-gradient-end-color: var(--glass-bg-gradient-end-color-dark);
  --glass-border-color: var(--glass-border-color-dark);
  --glass-shadow-color-soft: var(--glass-shadow-color-soft-dark);
  --glass-shadow-color-strong: var(--glass-shadow-color-strong-dark);
  --glass-blur-intensity: 10px; /* Can be same as light or themed */
  --glass-text-color: var(--glass-text-color-dark);
  --glass-heading-color: var(--glass-heading-color-dark);
  --glass-border-radius: 14px; /* Can be same as light or themed */

  --primary-color: var(--primary-color-dark);
  --primary-hover-color: var(--primary-hover-color-dark);
  --on-primary-text-color: var(--on-primary-text-color-dark);

  --text-color: var(--glass-text-color);
  --text-muted-color: var(--text-muted-color-dark);
  --background-color: transparent;
  --surface-color: transparent;
  --border-color: var(--glass-border-color);
  
  --button-glass-bg-start-color: var(--button-glass-bg-start-color-dark);
  --button-glass-bg-end-color: var(--button-glass-bg-end-color-dark);
  --button-glass-text-color: var(--glass-text-color);
  --button-border-color: var(--button-border-color-dark);

  --input-glass-bg-color: var(--input-glass-bg-color-dark);
  --input-glass-text-color: var(--glass-text-color);
  --input-glass-border-color: var(--input-glass-border-color-dark);
  
  /* Kept from previous theme for compatibility, can be reviewed */
  --secondary-color: #5a6268; /* Darker cool gray for dark mode */
  --accent-color-success: var(--accent-color-success-dark);
  --accent-color-warning: var(--accent-color-warning-dark);
  --accent-color-warning-text: var(--glass-text-color-dark); /* Updated */
  --accent-color-info: var(--accent-color-info-dark);
  --disabled-bg-color: var(--disabled-bg-color-dark);
  --disabled-text-color: var(--disabled-text-color-dark);
  --footer-bg-color: var(--footer-bg-color-dark);
  --footer-text-color: var(--footer-text-color-dark);
  --link-color: var(--link-color-dark);
  --link-hover-color: var(--link-hover-color-dark);
  --loading-message-bg: var(--loading-message-bg-dark);
  --loading-message-text: var(--glass-text-color-dark);
  --loading-message-border: var(--loading-message-border-dark);
  --error-message-bg: var(--error-message-bg-dark);
  --error-message-text: var(--error-message-text-dark);
  --error-message-border: var(--error-message-border-dark);
  
  /* Fonts & other base vars copied from :root */
  --font-family-sans-serif: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
  --font-family-monospace: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  --spacing-unit: 8px;
  --border-radius: var(--glass-border-radius);
  --max-content-width: 1280px;
}

/* Specific overrides for dark mode elements */
/* html[data-theme="dark"] header rule for color was removed as h1 now handles its color directly via --header-text-color */

html[data-theme="dark"] button.success, 
html[data-theme="dark"] .button.success {
  color: var(--on-primary-text-color-dark); /* Ensure text contrast on success buttons */
}
html[data-theme="dark"] select:focus,
html[data-theme="dark"] input[type="text"]:focus,
html[data-theme="dark"] input[type="number"]:focus,
html[data-theme="dark"] textarea:focus {
  box-shadow: 0 0 0 0.25rem color-mix(in srgb, var(--primary-color) 30%, transparent);
}
html[data-theme="dark"] input[type="radio"],
html[data-theme="dark"] input[type="checkbox"] {
  accent-color: var(--primary-color); /* Primary color should be the dark theme primary */
}

/* Responsive adjustments */
@media (max-width: 992px) { /* Tablets */
  #app-container {
    padding: var(--spacing-unit) * 1.5; 
  }
  header h1 {
    font-size: 2rem; 
  }
  section h2 {
    font-size: 1.65rem; 
  }
  section h3 {
    font-size: 1.35rem; 
  }

  .analysis-controls,
  .qualification-path-controls,
  .simulation-controls {
    flex-direction: column;
    align-items: stretch; 
  }
  .control-group {
    flex-direction: column;
    align-items: flex-start;
    width: 100%;
  }
  .control-group label, .control-group fieldset legend {
    margin-bottom: calc(var(--spacing-unit) * 0.5); 
  }
  .control-group select, .control-group input[type="radio"] + label, .control-group input[type="checkbox"] + label {
    width: 100%;
  }
  fieldset.control-group label { 
    width: auto; 
    margin-bottom: 0;
  }

  #scenario-simulation .simulation-results-container {
    flex-direction: column;
  }
  #overall-probabilities > div[style*="flex-direction: row"] { 
    flex-direction: column !important; 
  }
  #overall-probabilities > div > div[style*="flex: 1"] {
      margin-bottom: var(--spacing-unit) * 2; 
  }
}

@media (max-width: 576px) { /* Small phones */
  body {
    font-size: 15px; 
  }
  #app-container {
    padding: var(--spacing-unit); 
  }
  header h1 {
    font-size: 1.75rem; 
  }
  section h2 {
    font-size: 1.5rem; 
  }
  section h3 {
    font-size: 1.25rem; 
  }
  th, td {
    padding: var(--spacing-unit); 
  }
  button, .button {
    width: 100%;
    margin-bottom: var(--spacing-unit); 
  }
  .analysis-controls button,
  .qualification-path-controls button,
  .simulation-controls button { 
      width: 100%;
  }

  select, input[type="text"], input[type="number"], textarea {
      font-size: 0.95em; 
  }
}
