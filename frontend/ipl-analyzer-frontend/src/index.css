@import url("./custom-styles.css");

:root {
  /* Default Theme: "default-orange-blue" Light Mode */
  /* (Based on the previous "Orange & Blue Glassmorphic Theme - Dark Mode") */

  /* New Color Palette */
  --color-honey-neutral: #E6C88C;
  --color-terra-cotta:  #B7525E;
  --color-mocha-mousse: #A47864;

  /* Glassmorphism Overlay Variables */
  --glass-light-bg:    rgba(255,255,255,0.15);
  --glass-light-border:rgba(255,255,255,0.30);
  --glass-dark-bg:     rgba(34,34,34,0.50);
  --glass-dark-border: rgba(255,255,255,0.30);
  --glass-light-bg-hover: rgba(255,255,255,0.25);
  --glass-dark-bg-hover: rgba(34,34,34,0.25); /* Note: Lighter than default dark, as per instruction */

  /* Page Gradient Variables */
  --gradient-page-start-color: #FFFFFF; /* White - For new light mode gradient */
  --gradient-page-end-color: #F0F0F0;   /* Light Grey - For new light mode gradient */
  --header-text-color-light: #E0E0E0; /* Header text for this mode */
  --header-text-color: var(--header-text-color-light);

  /* Glassmorphic & General Variables */
  --glass-bg-gradient-start-color: rgba(40, 58, 71, 0.65);  /* Dark Slate Blue, semi-transparent */
  --glass-bg-gradient-end-color: rgba(200, 100, 0, 0.55); /* Dark Orange/Amber, semi-transparent */
  --glass-border-color: rgba(255, 140, 0, 0.3); /* Dark Orange, low opacity for borders */
  --glass-shadow-color-soft: rgba(0, 0, 0, 0.25);
  --glass-shadow-color-strong: rgba(0, 0, 0, 0.35);
  --glass-blur-intensity: 10px; 
  --glass-text-color: #EAEAEA;     /* Light Gray */
  --glass-heading-color: #FFA500;  /* Orange for headings on dark glass */
  --glass-border-radius: 14px;

  --primary-color: #FFA500; /* Orange */
  --primary-hover-color: #FFB733; /* Lighter Orange */
  --on-primary-text-color: #1A2A3A; /* Dark text on orange */

  --text-color: var(--glass-text-color);
  --text-muted-color: #9EADBA; /* Lighter Muted Blue-Gray */
  --background-color: transparent; 
  --surface-color: transparent;    
  --border-color: var(--glass-border-color); 
  
  --button-glass-bg-start-color: rgba(50, 68, 81, 0.5);
  --button-glass-bg-end-color: rgba(210, 110, 10, 0.4);
  --button-glass-text-color: var(--glass-text-color);
  --button-border-color: var(--glass-border-color);

  --input-glass-bg-color: rgba(26, 42, 58, 0.5); /* Darker Blue, semi-transparent */
  --input-glass-text-color: var(--glass-text-color);
  --input-glass-border-color: var(--glass-border-color);

  /* Accent & Utility Colors (can be part of the base theme or adjusted per palette) */
  --accent-color-success: #28a745; 
  --accent-color-warning: #b8860b; /* Darker yellow, good for this "darker" light theme */
  --accent-color-warning-text: var(--glass-text-color); /* Ensure contrast */
  --accent-color-info: #17a2b8; 
  
  --disabled-bg-color: #495057;
  --disabled-text-color: #adb5bd;
  --footer-bg-color: #212529;
  --footer-text-color: #ced4da;
  --link-color: #FFB733; 
  --link-hover-color: #FFA500; 

  --loading-message-bg: var(--accent-color-info);
  --loading-message-text: var(--glass-text-color);
  --loading-message-border: #106777;
  --error-message-bg: #58181F;
  --error-message-text: #F8D7DA;
  --error-message-border: #721c24;

  /* Base structural variables (kept from original :root) */
  --font-family-sans-serif: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
  --font-family-monospace: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  --spacing-unit: 8px;
  --border-radius: var(--glass-border-radius); /* Global radius to use glass radius */
  --max-content-width: 1280px;

  /* The following placeholder sections are removed as they are obsolete.
     The :root now defines the base for the default (light) theme.
     Mode-specific overrides are in their respective blocks. */
}

html[data-base-theme="default-orange-blue"][data-mode="light"] {
  /* This block defines mode-specific overrides for light mode.
     Most common variables are now inherited directly from :root,
     which defines the light mode baseline. */
  --bg-page:      #FFFFFF;
  --bg-section:   #F7F3EF;
  --text-primary: #000000; /* Black text for primary content in light mode */
  --header-text-color: var(--text-primary); /* MODIFIED: Ensure header text is black in light mode */

  /* The following variables are essentially re-stating what's in :root 
     or are part of the :root definition of the light theme.
     They are removed for clarity and to rely on :root as the source of truth for light mode defaults.
     If light mode needs to specifically differ from the :root base, those overrides would remain.
  */

  /* Light Mode Table Cell Backgrounds for White Text */
  /* General table data cells in Light Mode */
  /* This rule needs to be specific enough to override .table-responsive background-color */
}

html[data-base-theme="default-orange-blue"][data-mode="light"] .table-responsive td {
    /* color: #FFFFFF !important; /* This is already globally set on 'th, td' and is inherited */
    background-color: #757575; /* Dark grey background for general cells */
}

/* Team-specific table data cells in Light Mode */
html[data-base-theme="default-orange-blue"][data-mode="light"] .table-responsive td.team-specific-cell {
    /* color: #FFFFFF !important; /* This is already globally set on 'th, td' and is inherited */
    background-color: color-mix(in srgb, var(--team-bg-color, #808080) 50%, #404040) !important; /* Darker team-tinted background */
}

/* Hover state for general td cells in light mode - ensure it contrasts with white text */
html[data-base-theme="default-orange-blue"][data-mode="light"] .table-responsive tbody tr:hover td {
    /* Ensure this doesn't get overridden by a more specific team-specific-cell hover rule if not intended */
    background-color: color-mix(in srgb, #757575 85%, var(--primary-hover-color, #FFB733) 15%); /* Slightly tint the dark grey with primary color on hover */
}

/* Hover state for team-specific td cells in light mode - ensure it contrasts with white text */
html[data-base-theme="default-orange-blue"][data-mode="light"] .table-responsive tbody tr:hover td.team-specific-cell {
    background-color: color-mix(in srgb, var(--team-bg-color, #808080) 60%, #303030) !important; /* Darker hover mix for team specific cells */
}

/* Original commented out variables from light theme for reference, can be fully deleted */
/*html[data-base-theme="default-orange-blue"][data-mode="light"] {*/
/* Closing the empty or nearly empty light mode block from previous refactoring correctly */

/* Light Mode Table Header Specific Styles */
html[data-base-theme="default-orange-blue"][data-mode="light"] .table-responsive th {
    color: var(--text-primary) !important; /* Black text in Light Mode */
    text-shadow: none; /* Remove shadow previously added for white text */
}

/*html[data-base-theme="default-orange-blue"][data-mode="light"] {*/
  /*  
  --gradient-page-start-color: #D2691E; 
  --gradient-page-end-color: #2C3E50;   
  /* --header-text-color: #E0E0E0; /* This line is effectively replaced by the one above */

  --glass-bg-gradient-start-color: rgba(40, 58, 71, 0.65);  
  --glass-bg-gradient-end-color: rgba(200, 100, 0, 0.55); 
  --glass-border-color: rgba(255, 140, 0, 0.3); 
  --glass-shadow-color-soft: rgba(0, 0, 0, 0.25);
  --glass-shadow-color-strong: rgba(0, 0, 0, 0.35);
  --glass-blur-intensity: 10px; 
  --glass-text-color: #EAEAEA;     
  --glass-heading-color: #FFA500;  
  --glass-border-radius: 14px;

  --primary-color: #FFA500; 
  --primary-hover-color: #FFB733; 
  --on-primary-text-color: #1A2A3A; 

  --text-color: var(--glass-text-color);
  --text-muted-color: #9EADBA; 
  --background-color: transparent; 
  --surface-color: transparent;    
  --border-color: var(--glass-border-color); 
  
  --button-glass-bg-start-color: rgba(50, 68, 81, 0.5);
  --button-glass-bg-end-color: rgba(210, 110, 10, 0.4);
  --button-glass-text-color: var(--glass-text-color);
  --button-border-color: var(--glass-border-color);

  --input-glass-bg-color: rgba(26, 42, 58, 0.5); 
  --input-glass-text-color: var(--glass-text-color);
  --input-glass-border-color: var(--glass-border-color);

  --accent-color-success: #28a745; 
  --accent-color-warning: #b8860b;
  --accent-color-warning-text: var(--glass-text-color);
  --accent-color-info: #17a2b8; 
  
  --disabled-bg-color: #495057;
  --disabled-text-color: #adb5bd;
  --footer-bg-color: #212529;
  --footer-text-color: #ced4da;
  --link-color: #FFB733; 
  --link-hover-color: #FFA500; 

  --loading-message-bg: var(--accent-color-info);
  --loading-message-text: var(--glass-text-color);
  --loading-message-border: #106777;
  --error-message-bg: #58181F;
  --error-message-text: #F8D7DA;
  --error-message-border: #721c24;
  */
}

html[data-base-theme="default-orange-blue"][data-mode="dark"] {
  --bg-page:    #000000; /* Changed from #1E1E1E to pure black */
  --bg-section: #121212; /* This remains a dark gray for contrast */
  --text-primary: #FFFFFF;

  --gradient-page-start-color: #000000;   /* Black - For new dark mode gradient */
  --gradient-page-end-color: #1A1A1A;     /* Dark Grey - For new dark mode gradient */
  --header-text-color: #F0F0F0; /* Header text for this mode */

  --glass-bg-gradient-start-color: rgba(20, 28, 35, 0.7);  /* Very Dark Slate Blue */
  --glass-bg-gradient-end-color: rgba(130, 65, 0, 0.6); /* Very Dark Orange */
  --glass-border-color: rgba(200, 100, 0, 0.25); /* Muted Dark Orange */
  --glass-shadow-color-soft: rgba(0, 0, 0, 0.35);
  --glass-shadow-color-strong: rgba(0, 0, 0, 0.45);
  /* --glass-blur-intensity: 10px; (can inherit or be redefined) */
  --glass-text-color: #F5F5F5;     /* Lighter Gray */
  --glass-heading-color: #FFB74D;  /* Brighter Orange */
  /* --glass-border-radius: 14px; (can inherit) */

  --primary-color: #FFB74D; /* Brighter Orange */
  --primary-hover-color: #FFC777; 
  --on-primary-text-color: #1A2A3A; 

  --text-color: var(--glass-text-color);
  --text-muted-color: #AEBAC7; 
  /* --background-color: transparent; (already set in :root) */
  /* --surface-color: transparent; (already set in :root) */
  --border-color: var(--glass-border-color); 
  
  --button-glass-bg-start-color: rgba(30, 38, 45, 0.6);
  --button-glass-bg-end-color: rgba(140, 75, 10, 0.5);
  --button-glass-text-color: var(--glass-text-color);
  --button-border-color: var(--glass-border-color);

  --input-glass-bg-color: rgba(16, 22, 38, 0.6); 
  --input-glass-text-color: var(--glass-text-color);
  --input-glass-border-color: var(--glass-border-color);

  --accent-color-success: #39C15D; /* Brighter Green */
  --accent-color-warning: #FFC107; /* Standard Yellow, more visible */
  --accent-color-warning-text: #1A2A3A; /* Darker text for yellow */
  --accent-color-info: #3EACCF; /* Brighter Info Blue */
  
  --disabled-bg-color: #3A3A3A;
  --disabled-text-color: #888888;
  --footer-bg-color: #1A1A1A;
  --footer-text-color: #BBBBBB;
  --link-color: #FFC777; 
  --link-hover-color: #FFB74D; 

  --loading-message-bg: var(--accent-color-info);
  --loading-message-text: var(--glass-text-color);
  --loading-message-border: color-mix(in srgb, var(--accent-color-info) 80%, #000);
  --error-message-bg: #7A282F;
  --error-message-text: #FADADD;
  --error-message-border: #A53842;
}

html[data-base-theme="default-orange-blue"][data-mode="dark"] .glass-card {
  background: var(--glass-dark-bg, rgba(34, 34, 34, 0.50)); /* Fallback for --glass-dark-bg */
  border: 1px solid var(--glass-dark-border, rgba(255, 255, 255, 0.30)); /* Fallback for --glass-dark-border */
  background-color: rgba(34, 34, 34, 0.85); /* Fallback solid background for dark mode */
  /* backdrop-filter: blur(10px); /* Inherited or can be redefined if different blur needed */
  /* border-radius is inherited */
  /* color: var(--glass-text-color); /* Should be inherited from the dark mode's --glass-text-color if set right */
}
/* Ensure heading/text colors inside glass-card also adapt in dark mode if not automatically handled by vars */
html[data-base-theme="default-orange-blue"][data-mode="dark"] .glass-card h2,
html[data-base-theme="default-orange-blue"][data-mode="dark"] .glass-card h3,
html[data-base-theme="default-orange-blue"][data-mode="dark"] .glass-card h4 {
  color: var(--glass-heading-color); /* This will use the dark mode's --glass-heading-color */
}
html[data-base-theme="default-orange-blue"][data-mode="dark"] .glass-card p,
html[data-base-theme="default-orange-blue"][data-mode="dark"] .glass-card li,
html[data-base-theme="default-orange-blue"][data-mode="dark"] .glass-card span {
  color: var(--glass-text-color); /* This will use the dark mode's --glass-text-color */
}


/* Global Resets & Defaults */
*,
*::before,
*::after {
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  font-family: var(--font-family-sans-serif);
  margin: 0;
  padding: 0;
  background-color: var(--background-color); 
  color: var(--text-color);
  line-height: 1.65; 
  font-size: 16px; 
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  min-height: 100vh;
  background-image: linear-gradient(135deg, var(--gradient-page-start-color), var(--gradient-page-end-color));
  background-size: 200% 200%; 
  animation: pageGradientAnimation 20s ease infinite;
}

@keyframes pageGradientAnimation {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

#root {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  background-color:transparent; /* Ensure #root is transparent */
}

/* App Container */
#app-container {
  max-width: var(--max-content-width);
  margin: 0 auto;
  padding: calc(var(--spacing-unit) * 2) calc(var(--spacing-unit) * 3);
  width: 100%;
  flex-grow: 1;
}

/* Header */
header {
  /* background: transparent; /* REMOVED - Header is part of page gradient */
  /* color: var(--header-text-color-light); /* REMOVED - h1 handles its own color */
  padding: calc(var(--spacing-unit) * 2.5) 0; 
  text-align: center;
  border-radius: var(--glass-border-radius); /* UPDATED */
  margin-bottom: calc(var(--spacing-unit) * 4); 
  /* box-shadow: none; /* REMOVED */
  border-bottom: 1px solid var(--glass-border-color); /* ADDED */
}

header h1 {
  margin: 0;
  font-size: 2.25rem; 
  font-weight: 700;
  letter-spacing: -0.5px;
  color: var(--header-text-color); /* ADDED/UPDATED */
}

/* Sections */
section {
  margin-bottom: calc(var(--spacing-unit) * 4); 
  /* Styles removed as GlassCard is used */
}

section h2 {
  margin-top: 0;
  margin-bottom: calc(var(--spacing-unit) * 2.5); 
  color: var(--glass-heading-color); /* This was already changed as per previous plan */
  border-bottom: 2px solid var(--primary-color); /* CHANGED from 3px to 2px */
  padding-bottom: calc(var(--spacing-unit) * 1.5); 
  font-size: 1.85rem; 
  font-weight: 600;
}

section h3 {
  margin-top: calc(var(--spacing-unit) * 2); 
  margin-bottom: calc(var(--spacing-unit) * 1.5); 
  font-size: 1.5rem; 
  color: var(--glass-text-color); /* Use glass text color */
  font-weight: 600;
}

section h4 {
  margin-top: var(--spacing-unit) * 1.5; 
  margin-bottom: var(--spacing-unit); 
  font-size: 1.2rem; 
  color: var(--text-muted-color); /* Use general muted text */
  font-weight: 600;
}

/* Fix for h3 elements directly under section in Light Mode */
html[data-base-theme="default-orange-blue"][data-mode="light"] section > h3 {
    color: var(--text-primary) !important; /* --text-primary is black in light mode */
    /* text-shadow: none; /* Optional: remove any shadow if previously applied */
}

/* Fix for h4 elements directly under section in Light Mode */
html[data-base-theme="default-orange-blue"][data-mode="light"] section > h4 {
    color: var(--text-primary) !important; /* --text-primary is black in light mode */
    /* text-shadow: none; /* Optional: remove any shadow if previously applied */
}

/* Generic Table Styling for Glassmorphism */
.table-responsive {
  overflow-x: auto;
  width: 100%;
  margin-top: calc(var(--spacing-unit) * 2);
  border-radius: calc(var(--glass-border-radius) - 8px); /* Keep this from previous glass refinement */
  overflow: hidden; 
  background-color: color-mix(in srgb, var(--glass-bg-gradient-start-color) 15%, transparent); /* UPDATED */
  border: 1px solid var(--glass-border-color);
}
table {
  width: 100%;
  border-collapse: separate; 
  border-spacing: 0;
  background-color: transparent;
}

th, td {
  padding: calc(var(--spacing-unit) * 1.5);
  text-align: left;
  vertical-align: middle;
  border: none; 
  border-bottom: 1px solid var(--glass-border-color); 
  color: #FFFFFF !important; /* MODIFIED: Set to white for all modes */
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); /* MODIFIED: Soft black shadow for white text */
}

/* New rule for cells that will display team colors */
td.team-specific-cell {
  background-color: color-mix(in srgb, var(--team-bg-color, transparent) 15%, transparent) !important; /* MODIFIED for 0.15 opacity */
  color: #FFFFFF !important; /* MODIFIED: Set to white for all modes */
  font-weight: 600; /* Make team names a bit bolder */
}
/* Ensure specificity if other td styles might override background/color */
.table-responsive tbody tr:hover td.team-specific-cell {
    /* Keeping hover effect distinct, might need future review for opacity on hover */
    background-color: color-mix(in srgb, var(--team-bg-color, transparent) 25%, var(--primary-color) 20%) !important; /* Adjusted hover opacity slightly */
}

td:first-child, th:first-child {
    padding-left: calc(var(--spacing-unit) * 2); 
}
td:last-child, th:last-child {
    padding-right: calc(var(--spacing-unit) * 2);
}

th {
  /* background: linear-gradient(135deg, var(--glass-bg-gradient-start-color), var(--glass-bg-gradient-end-color)); /* REMOVED old gradient */
  background-color: color-mix(in srgb, var(--glass-bg-gradient-end-color) 20%, transparent); /* UPDATED */
  color: #FFFFFF !important; /* MODIFIED: Set to white for all modes (ensure it overrides th, td rule if needed, though !important on td,th might cover) */
  font-weight: 700;
  white-space: nowrap;
  border-bottom-width: 2px; 
  border-bottom-color: var(--primary-color); /* Kept as per instruction */
}

tbody tr:nth-child(even) {
  /* background-color: color-mix(in srgb, var(--glass-bg-gradient-start-color) 10%, transparent); /* REMOVED old striping */
  background-color: transparent; /* UPDATED - removing striping */
}

tbody tr:hover {
  /* background-color: color-mix(in srgb, var(--primary-color) 20%, var(--glass-bg-gradient-end-color) 30%); /* REMOVED old hover */
  background-color: color-mix(in srgb, var(--primary-color) 15%, transparent); /* UPDATED */
}

table caption {
  caption-side: top;
  font-size: 1.1em;
  font-weight: 600;
  color: var(--text-muted-color);
  padding: var(--spacing-unit);
  text-align: left;
}

/* Form Elements */
.analysis-controls,
.qualification-path-controls,
.simulation-controls {
  display: flex;
  flex-wrap: wrap;
  gap: calc(var(--spacing-unit) * 2.5); 
  margin-bottom: calc(var(--spacing-unit) * 3); 
  padding: calc(var(--spacing-unit) * 2); 
  background: linear-gradient(135deg, var(--glass-bg-gradient-start-color), var(--glass-bg-gradient-end-color));
  border-radius: var(--glass-border-radius);
  border: 1px solid var(--glass-border-color);
  backdrop-filter: blur(var(--glass-blur-intensity));
  -webkit-backdrop-filter: blur(var(--glass-blur-intensity));
  box-shadow: var(--glass-shadow-color-soft) 0 4px 6px;
  align-items: center;
}

.control-group {
  display: flex;
  align-items: center;
  gap: var(--spacing-unit); 
}

.control-group label, fieldset legend {
  font-weight: 600; 
  color: var(--glass-text-color);
  margin-right: calc(var(--spacing-unit) * 0.5); 
  font-size: 0.95em; 
}
fieldset {
    border: none;
    padding: 0;
    margin: 0;
    background: transparent; /* Ensure fieldset itself is transparent */
}
fieldset.control-group { 
    gap: var(--spacing-unit) * 1.5; 
}
fieldset legend {
    padding: 0 0 calc(var(--spacing-unit) * 0.5) 0; 
    margin-bottom: calc(var(--spacing-unit) * 0.5);
}

select,
input[type="text"],
input[type="number"],
textarea {
  padding: calc(var(--spacing-unit) * 1.25) calc(var(--spacing-unit) * 1.5); 
  border-radius: var(--glass-border-radius); 
  border: 1px solid var(--glass-light-border);
  background: var(--glass-light-bg);
  font-size: 1em;
  color: var(--text-primary); /* Changed from --input-glass-text-color */
  transition: border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out, background-color 0.2s ease, background 0.2s ease;
  min-width: 180px; 
  backdrop-filter: blur(var(--glass-blur-intensity));
  -webkit-backdrop-filter: blur(var(--glass-blur-intensity));
  box-shadow: inset 0 1px 2px rgba(0,0,0,0.075); 
}

select { /* Explicitly separate select for individual styling */
  padding: calc(var(--spacing-unit) * 1.25) calc(var(--spacing-unit) * 1.5); 
  border-radius: var(--glass-border-radius); 
  border: 1px solid var(--glass-light-border);
  background: var(--glass-light-bg);
  font-size: 1em;
  color: var(--text-primary); /* Changed from --input-glass-text-color */
  transition: border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out, background-color 0.2s ease, background 0.2s ease;
  min-width: 180px; 
  backdrop-filter: blur(var(--glass-blur-intensity));
  -webkit-backdrop-filter: blur(var(--glass-blur-intensity));
  box-shadow: inset 0 1px 2px rgba(0,0,0,0.075); 
  -webkit-appearance: none; /* Remove default styling */
  -moz-appearance: none;    /* Remove default styling */
  appearance: none;         /* Remove default styling */
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath fill='none' stroke='%23333' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3E%3C/svg%3E"); /* Custom arrow */
  background-repeat: no-repeat;
  background-position: right calc(var(--spacing-unit) * 1.5) center;
  background-size: 1em;
}

select:hover {
  background: var(--glass-light-bg-hover);
  border-color: var(--primary-hover-color); /* Keep some hover feedback on border */
}

select:focus,
input[type="text"]:focus,
input[type="number"]:focus,
textarea:focus {
  border-color: var(--primary-color);
  outline: 0;
  box-shadow: 0 0 0 0.25rem color-mix(in srgb, var(--primary-color) 30%, transparent); 
  /* background-color for focus should align with hover or be distinct */
  background: var(--glass-light-bg-hover); /* Using hover background for focus */
}

input[type="radio"],
input[type="checkbox"] {
  margin-right: calc(var(--spacing-unit) * 0.75); 
  accent-color: var(--primary-color); 
  transform: scale(1.1); 
}

.control-group label[for*="-radio"],
.control-group label[for*="-checkbox"] {
  margin-right: var(--spacing-unit); 
  font-weight: normal; 
  color: var(--glass-text-color); /* Ensure these labels also use glass text color */
}

button, .button {
  padding: calc(var(--spacing-unit) * 1.25) calc(var(--spacing-unit) * 2.5); 
  border: 1px solid var(--button-border-color);
  border-radius: var(--border-radius); 
  background: linear-gradient(135deg, var(--button-glass-bg-start-color), var(--button-glass-bg-end-color));
  color: var(--button-glass-text-color);
  font-size: 1em;
  font-weight: 600; 
  cursor: pointer;
  transition: background-color 0.2s ease-in-out, border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out, transform 0.1s ease;
  text-align: center;
  display: inline-block;
  text-decoration: none;
  white-space: nowrap; 
  backdrop-filter: blur(calc(var(--glass-blur-intensity) / 2));
  -webkit-backdrop-filter: blur(calc(var(--glass-blur-intensity) / 2));
  box-shadow: 0 2px 4px var(--glass-shadow-color-soft);
}
button:hover, .button:hover {
  background: linear-gradient(135deg, color-mix(in srgb, var(--button-glass-bg-start-color) 80%, var(--primary-color) 20%), color-mix(in srgb, var(--button-glass-bg-end-color) 80%, var(--primary-color) 20%));
  border-color: var(--primary-color);
  box-shadow: 0 3px 6px var(--glass-shadow-color-strong);
}
button:active, .button:active {
    transform: translateY(1px);
    box-shadow: 0 1px 2px var(--glass-shadow-color-strong);
}
button:focus-visible, .button:focus-visible { 
  outline: 2px solid var(--primary-color);
  outline-offset: 2px;
  box-shadow: 0 0 0 0.25rem color-mix(in srgb, var(--primary-color) 30%, transparent);
}

button:disabled, .button:disabled {
  background: color-mix(in srgb, var(--button-glass-bg-start-color) 40%, #888888 60%); /* More muted */
  border-color: color-mix(in srgb, var(--glass-border-color) 50%, #888888 50%);
  color: color-mix(in srgb, var(--button-glass-text-color) 50%, #777777 50%);
  cursor: not-allowed;
  opacity: 0.6; 
  box-shadow: none;
  transform: none;
  backdrop-filter: none;
}

button.success, .button.success {
  background: linear-gradient(135deg, color-mix(in srgb, var(--button-glass-bg-start-color) 70%, var(--accent-color-success) 30%), color-mix(in srgb, var(--button-glass-bg-end-color) 70%, var(--accent-color-success) 30%));
  border-color: var(--accent-color-success);
  color: var(--on-primary-text-color); /* Assuming success buttons use primary-like text contrast */
}
button.success:hover, .button.success:hover {
  background: linear-gradient(135deg, color-mix(in srgb, var(--button-glass-bg-start-color) 50%, var(--accent-color-success) 50%), color-mix(in srgb, var(--button-glass-bg-end-color) 50%, var(--accent-color-success) 50%));
  border-color: color-mix(in srgb, var(--accent-color-success) 80%, #000000 20%);
}
button.warning, .button.warning {
  background: linear-gradient(135deg, color-mix(in srgb, var(--button-glass-bg-start-color) 70%, var(--accent-color-warning) 30%), color-mix(in srgb, var(--button-glass-bg-end-color) 70%, var(--accent-color-warning) 30%));
  border-color: var(--accent-color-warning);
  color: var(--accent-color-warning-text); 
}
button.warning:hover, .button.warning:hover {
  background: linear-gradient(135deg, color-mix(in srgb, var(--button-glass-bg-start-color) 50%, var(--accent-color-warning) 50%), color-mix(in srgb, var(--button-glass-bg-end-color) 50%, var(--accent-color-warning) 50%));
  border-color: color-mix(in srgb, var(--accent-color-warning) 80%, #000000 20%);
}


/* Utilities */
.text-center { text-align: center; }
.mb-1 { margin-bottom: var(--spacing-unit); } 
.mb-2 { margin-bottom: calc(var(--spacing-unit) * 2); } 
.mb-3 { margin-bottom: calc(var(--spacing-unit) * 3); } 
.mt-1 { margin-top: var(--spacing-unit); }
.mt-2 { margin-top: calc(var(--spacing-unit) * 2); }
.mt-3 { margin-top: calc(var(--spacing-unit) * 3); }
.text-warning { 
  color: var(--accent-color-warning-text); 
  background-color: color-mix(in srgb, var(--accent-color-warning) 70%, transparent); 
  padding: var(--spacing-unit); 
  border-radius: var(--border-radius); 
  border: 1px solid var(--accent-color-warning);
}

/* Glass Card Component Style */
.glass-card {
  background: var(--glass-light-bg, rgba(255, 255, 255, 0.15)); /* Fallback for --glass-light-bg */
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid var(--glass-light-border, rgba(255, 255, 255, 0.30)); /* Fallback for --glass-light-border */
  background-color: rgba(255, 255, 255, 0.75); /* Fallback solid background for light mode */
  border-radius: var(--glass-border-radius, 14px);
  padding: calc(var(--spacing-unit) * 2.5); /* Default padding, can be overridden */
  box-shadow: 0 4px 12px rgba(0,0,0,0.1); /* Soft shadow for depth */
  color: var(--text-primary); /* MODIFIED: Ensure text contrasts with card background */
}
.glass-card h2, .glass-card h3, .glass-card h4 {
  color: var(--text-primary); /* MODIFIED: Ensure headings contrast (can be refined by design) */
}
.glass-card p, .glass-card li, .glass-card span {
  color: var(--text-primary); /* MODIFIED: Ensure text contrasts with card background */
}

/* Analysis Panel Specific Styles */
.analysis-panel-card {
  /* Assuming this class is added to a .glass-card element */
  /* This will override the default .glass-card 'background' property */
  /* The backdrop-filter and border from .glass-card will still apply */
  background: color-mix(in srgb, var(--color-honey-neutral) 20%, transparent);
}

.analysis-panel-card h2,
.analysis-panel-card h3 {
  color: var(--color-mocha-mousse);
}
/* Fallback if --color-mocha-mousse is not defined, or to ensure it overrides general glass-card heading colors */
.analysis-panel-card h2 {
  color: var(--color-mocha-mousse, #A47864); 
}
.analysis-panel-card h3 {
  color: var(--color-mocha-mousse, #A47864);
}


/* Current Standings Metadata */
#current-standings .metadata p {
  margin-bottom: calc(var(--spacing-unit) * 0.75); 
  font-size: 0.9em;
  color: var(--text-muted-color);
}

/* Scenario Simulation Specifics */
#scenario-simulation .simulation-message {
  margin-top: var(--spacing-unit);
  padding: calc(var(--spacing-unit) * 1.5); 
  background-color: color-mix(in srgb, var(--accent-color-warning) 70%, transparent); 
  border: 1px solid var(--accent-color-warning); 
  border-radius: var(--border-radius);
  color: var(--accent-color-warning-text); 
  font-weight: 500;
}

#scenario-simulation .simulation-results-container {
  display: flex;
  gap: calc(var(--spacing-unit) * 3); 
  margin-top: calc(var(--spacing-unit) * 2.5); 
  flex-wrap: wrap;
}

#scenario-simulation .match-log-container,
#scenario-simulation .final-standings-container {
  flex: 1;
  min-width: 320px; 
  /* Uses GlassCard, so no specific bg/border/shadow here */
}

#scenario-simulation textarea {
  width: 100%;
  padding: var(--spacing-unit); 
  border-radius: calc(var(--glass-border-radius) / 2);
  border: 1px solid var(--input-glass-border-color); 
  font-family: var(--font-family-monospace);
  font-size: 0.95em; 
  background-color: var(--input-glass-bg-color); 
  color: var(--input-glass-text-color); 
  min-height: 250px; 
  resize: vertical;
  box-shadow: inset 0 1px 2px rgba(0,0,0,0.075);
  backdrop-filter: blur(calc(var(--glass-blur-intensity) / 3));
  -webkit-backdrop-filter: blur(calc(var(--glass-blur-intensity) / 3));
}

/* Qualification Path Specifics */
#qualification-path .qualification-path-results p {
  margin-bottom: var(--spacing-unit);
  font-size: 1.05em; 
}
#qualification-path .qualification-path-results strong {
  color: var(--primary-hover-color);
}
#qualification-path .metadata .text-warning { 
    font-size: 0.9em;
    margin-top: var(--spacing-unit);
}

/* Chart Container (OverallProbabilities) */
#overall-probabilities > div > div[style*="flex: 1"] { /* Targets the flex children from OverallProbabilities */
    /* Uses GlassCard, so no specific bg/border/shadow here */
    padding: var(--spacing-unit); /* Keep padding if needed around chart canvas */
}
#overall-probabilities .metadata p {
  margin-bottom: calc(var(--spacing-unit) * 0.75); 
  font-size: 0.9em;
  color: var(--text-muted-color);
}


/* Footer */
footer {
  text-align: center;
  padding: calc(var(--spacing-unit) * 3) 0; 
  margin-top: calc(var(--spacing-unit) * 4); 
  background-color: color-mix(in srgb, var(--glass-text-color) 85%, transparent); /* Darker, themed footer */
  color: var(--gradient-page-start-color); /* Contrasting text */
  border-top: 3px solid var(--primary-color);
}
footer p {
  margin: calc(var(--spacing-unit) * 0.5) 0; 
  font-size: 0.9em;
}

/* ARIA Live Regions - Basic Styling for Visibility */
p[role="status"], p[role="alert"] { 
    padding: calc(var(--spacing-unit) * 1.5);
    margin-top: var(--spacing-unit);
    border-radius: var(--border-radius);
    font-weight: 500;
    backdrop-filter: blur(var(--glass-blur-intensity));
    -webkit-backdrop-filter: blur(var(--glass-blur-intensity));
    border: 1px solid;
}
p[role="status"] { 
    background-color: color-mix(in srgb, var(--accent-color-info) 60%, transparent);
    color: var(--glass-text-color); 
    border-color: var(--accent-color-info); 
}
p[role="alert"] { 
    background-color: color-mix(in srgb, var(--error-message-bg) 60%, var(--glass-bg-gradient-start-color) 30%);
    color: var(--error-message-text); 
    border-color: var(--error-message-border); 
}

/* REMOVED old html[data-theme="light"] and html[data-theme="dark"] blocks */
/* New theme structure using data-base-theme and data-mode follows */

/* Specific overrides for dark mode elements */
/* html[data-theme="dark"] header rule for color was removed as h1 now handles its color directly via --header-text-color */

html[data-base-theme="default-orange-blue"][data-mode="dark"] header {
  color: var(--header-text-color); /* This ensures header text color respects the theme */
}
html[data-base-theme="default-orange-blue"][data-mode="dark"] button.success, 
html[data-base-theme="default-orange-blue"][data-mode="dark"] .button.success {
  color: var(--on-primary-text-color); /* Use on-primary from the dark theme definition */
}
html[data-base-theme="default-orange-blue"][data-mode="dark"] input[type="text"],
html[data-base-theme="default-orange-blue"][data-mode="dark"] input[type="number"],
html[data-base-theme="default-orange-blue"][data-mode="dark"] textarea {
  border-color: var(--glass-dark-border);
  background: var(--glass-dark-bg);
  color: var(--text-primary); /* Will be white in dark mode */
}

/* Specific dark mode styling for select, including the arrow */
html[data-base-theme="default-orange-blue"][data-mode="dark"] select {
  border-color: var(--glass-dark-border);
  background: var(--glass-dark-bg);
  color: var(--text-primary); /* Will be white in dark mode */
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath fill='none' stroke='%23eee' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3E%3C/svg%3E"); /* Custom arrow for dark mode */
  /* Inherits appearance: none, background-position, background-repeat, background-size from base select rule */
}

html[data-base-theme="default-orange-blue"][data-mode="dark"] select:hover {
  background: var(--glass-dark-bg-hover);
  border-color: var(--primary-hover-color);
}

html[data-base-theme="default-orange-blue"][data-mode="dark"] select:focus,
html[data-base-theme="default-orange-blue"][data-mode="dark"] input[type="text"]:focus,
html[data-base-theme="default-orange-blue"][data-mode="dark"] input[type="number"]:focus,
html[data-base-theme="default-orange-blue"][data-mode="dark"] textarea:focus {
  box-shadow: 0 0 0 0.25rem color-mix(in srgb, var(--primary-color) 30%, transparent);
  background: var(--glass-dark-bg-hover); /* Using hover background for focus in dark mode */
}

html[data-base-theme="default-orange-blue"][data-mode="dark"] input[type="radio"],
html[data-base-theme="default-orange-blue"][data-mode="dark"] input[type="checkbox"] {
  accent-color: var(--primary-color); /* Primary color should be the dark theme primary */
}

/* Responsive adjustments */
@media (max-width: 992px) { /* Tablets */
  #app-container {
    padding: var(--spacing-unit) * 1.5; 
  }
  header h1 {
    font-size: 2rem; 
  }
  section h2 {
    font-size: 1.65rem; 
  }
  section h3 {
    font-size: 1.35rem; 
  }

  .analysis-controls,
  .qualification-path-controls,
  .simulation-controls {
    flex-direction: column;
    align-items: stretch; 
  }
  .control-group {
    flex-direction: column;
    align-items: flex-start;
    width: 100%;
  }
  .control-group label, .control-group fieldset legend {
    margin-bottom: calc(var(--spacing-unit) * 0.5); 
  }
  .control-group select, .control-group input[type="radio"] + label, .control-group input[type="checkbox"] + label {
    width: 100%;
  }
  fieldset.control-group label { 
    width: auto; 
    margin-bottom: 0;
  }

  #scenario-simulation .simulation-results-container {
    flex-direction: column;
  }
  #overall-probabilities > div[style*="flex-direction: row"] { 
    flex-direction: column !important; 
  }
  #overall-probabilities > div > div[style*="flex: 1"] {
      margin-bottom: var(--spacing-unit) * 2; 
  }
}

@media (max-width: 576px) { /* Small phones */
  body {
    font-size: 15px; 
  }
  #app-container {
    padding: var(--spacing-unit); 
  }
  header h1 {
    font-size: 1.75rem; 
  }
  section h2 {
    font-size: 1.5rem; 
  }
  section h3 {
    font-size: 1.25rem; 
  }
  th, td {
    padding: var(--spacing-unit); 
  }
  button, .button {
    width: 100%;
    margin-bottom: var(--spacing-unit); 
  }
  .analysis-controls button,
  .qualification-path-controls button,
  .simulation-controls button { 
      width: 100%;
  }

  select, input[type="text"], input[type="number"], textarea {
      font-size: 0.95em; 
  }
}
