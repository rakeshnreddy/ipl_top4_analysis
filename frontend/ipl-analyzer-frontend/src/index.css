@import url("./custom-styles.css");

:root {
  /* Base structural variables */
  --font-family-sans-serif: 'Roboto', sans-serif;
  --font-family-monospace: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  --font-size: 16px; /* Base font size */
  --spacing-unit: 8px;
  --glass-border-radius: 16px; /* Updated panel radius */
  --border-radius: var(--glass-border-radius); /* Global radius, updated */
  --max-content-width: 1280px;

  /* New Panel Variables - Light/Default */
  --panel-border-color: rgba(255, 255, 255, 0.18);
  --panel-box-shadow: 0 8px 32px rgba(31, 38, 135, 0.2);

  /* New Light Theme Variables */
  --bg-light: #fefefe;
  --bg-accent: #A8E6CF;
  --bg-secondary: #FFD3B6;
  --text-light: #333;
  --panel-rgb: 255, 255, 255;
  --panel-alpha: 0.7;
  --panel-bg: rgba(var(--panel-rgb), var(--panel-alpha));
  --input-range-bg: rgba(255,255,255,0.4);
  --thumb-bg: #fff;
  --thumb-border: #A8E6CF;

  /* Default theme variables that might be used by components if not overridden by a specific theme context.
     These will likely be overridden by the active theme (legacy, default-orange-blue, or new-theme).
     Consider these as a fallback or base for unthemed contexts if any. */
  --primary-color: #FFA500; /* Example fallback */
  --text-color: #333333; /* Example fallback */
  --background-color: #FFFFFF; /* Example fallback */
  --header-text-color: #333333; /* Example fallback */
  --button-border-color: #FFA500; /* Example fallback */
  --button-glass-text-color: #FFFFFF; /* Example fallback */
  --glass-border-color: #FFA500; /* Example fallback */
  /* Add other generic fallbacks as needed */
}

/* New Theme: "new-theme" Light Mode (mirroring :root for now) */
html[data-base-theme="new-theme"][data-mode="light"] {
  /* Base structural variables */
  --font-family-sans-serif: 'Roboto', sans-serif;
  --font-family-monospace: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  --font-size: 16px;
  --spacing-unit: 8px;
  --glass-border-radius: 16px; /* Updated panel radius */
  --border-radius: var(--glass-border-radius); /* Updated panel radius */
  --max-content-width: 1280px;

  /* New Panel Variables - Light */
  --panel-border-color: rgba(255, 255, 255, 0.18);
  --panel-box-shadow: 0 8px 32px rgba(31, 38, 135, 0.2);

  /* New Light Theme Variables */
  --bg-light: #fefefe;
  --bg-accent: #A8E6CF;
  --bg-secondary: #FFD3B6;
  --text-light: #333;
  --panel-rgb: 255, 255, 255;
  --panel-alpha: 0.7;
  --panel-bg: rgba(var(--panel-rgb), var(--panel-alpha));
  --input-range-bg: rgba(255,255,255,0.4);
  --thumb-bg: #fff;
  --thumb-border: #A8E6CF;

  /* Fallback/default values for new-theme light mode, can be customized further */
  --primary-color: #A8E6CF; /* Example: using bg-accent as primary */
  --text-color: var(--text-light);
  --background-color: var(--bg-light);
  --header-text-color: var(--text-light);
  --button-border-color: var(--thumb-border);
  --button-glass-text-color: var(--text-light);
  --glass-border-color: var(--thumb-border);

  /* Define other variables needed for this theme, for example: */
  --gradient-page-start-color: var(--bg-light);
  --gradient-page-end-color: var(--bg-accent);
  --text-primary: var(--text-light); /* Common text color */
  --text-muted-color: #777; /* Muted text for new theme */
  --link-color: #2a7a65; /* Darker green for links */
  --link-hover-color: #38a386;
  --accent-color-success: #28a745;
  --accent-color-warning: #ffc107;
  --accent-color-warning-text: #333;
  --accent-color-info: #17a2b8;
  --error-message-bg: #f8d7da;
  --error-message-text: #721c24;
  --error-message-border: #f5c6cb;
  --loading-message-bg: #e2e3e5;
  --loading-message-text: #333;
  --loading-message-border: #d6d8db;
  --submit-light-hover-bg: #8fd9b6;
  --input-border-color: #ccc;
  --link-color: var(--bg-accent); /* Using theme's bg-accent */
  --link-hover-color: color-mix(in srgb, var(--link-color) 80%, #000);
  --link-light-hover-bg: rgba(255,255,255,0.9); /* For pill button link hover */
}

html[data-base-theme="new-theme"][data-mode="dark"] {
  /* Base structural variables (typically inherited, but can be overridden if needed) */
  /* --font-family-sans-serif: 'Roboto', sans-serif; */ /* Inherited */
  /* --font-family-monospace: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; */ /* Inherited */
  /* --font-size: 16px; */ /* Inherited */
  /* --spacing-unit: 8px; */ /* Inherited */
  /* --border-radius: var(--glass-border-radius); */ /* Inherited, or define new one */
  /* --max-content-width: 1280px; */ /* Inherited */

  /* New Panel Variables - Dark */
  --panel-border-color: rgba(var(--panel-rgb), 0.25); /* Uses panel-rgb (30,30,30 for dark) */
  --panel-box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);

  /* Button Variables - Dark */
  --button-dark-bg: #37474F;
  --button-dark-hover-bg: #4DB6AC;

  /* Input & Link Variables - Dark */
  --input-border-color: #555;
  --link-color: var(--thumb-border); /* Using dark theme's thumb-border for links */
  --link-hover-color: color-mix(in srgb, var(--link-color) 80%, #fff); /* Lighten for hover */
  --link-dark-hover-bg: rgba(70,70,70,0.9); /* For pill button link hover */

  /* New Dark Theme Variables */
  --bg-light: #1E1E1E; /* Main background for dark mode */
  --bg-accent: #2E3C40; /* Dark Slate / Deep Teal - used for gradients or accents */
  --bg-secondary: #1A2930; /* Very Dark Blue / Almost Black Blue - for secondary elements */
  --text-light: #e0e0e0; /* Primary text color for dark mode */
  
  --panel-rgb: 30, 30, 30; /* Darker panel base */
  --panel-alpha: 0.9;       /* Slightly more opaque for readability on dark bg */
  --panel-bg: rgba(var(--panel-rgb), var(--panel-alpha));
  
  --input-range-bg: rgba(255,255,255,0.2); /* Lighter track for contrast */
  --thumb-bg: #e0e0e0;                    /* Thumb color matching text */
  --thumb-border: #80CBC4;                /* Teal accent for thumb border */

  /* General variable overrides for dark mode functionality */
  --primary-color: var(--thumb-border); /* Using teal as primary for consistency */
  --text-color: var(--text-light);
  --text-primary: var(--text-light); /* Common text color */
  --background-color: var(--bg-light);
  --header-text-color: var(--text-light);
  
  --gradient-page-start-color: var(--bg-light);
  --gradient-page-end-color: var(--bg-accent);
  
  --text-muted-color: #8899A6; /* Muted text for dark theme */
  /* --link-color: var(--thumb-border); Already defined in "Input & Link Variables - Dark" */
  --link-hover-color: color-mix(in srgb, var(--link-color) 80%, #fff); /* Updated as per request */

  --button-border-color: var(--thumb-border);
  --button-glass-text-color: var(--text-light); 
  /* Note: button background might need specific dark theme variables if using gradients like the old theme */
  --glass-border-color: var(--thumb-border); /* General border color, if glassmorphism is adapted */

  /* Dark theme specific accent & message colors */
  --accent-color-success: #66bb6a;  /* Material Green 300 */
  --accent-color-warning: #ffa726;  /* Material Orange 300 */
  --accent-color-warning-text: #1E1E1E; /* Dark text for good contrast on orange warning */
  --accent-color-info: #42a5f5;     /* Material Blue 300 */
  
  --error-message-bg: #ef5350;      /* Material Red 300 */
  --error-message-text: #ffffff;    /* White text for error messages */
  --error-message-border: #e53935;  /* Material Red 400 */
  
  --loading-message-bg: #546e7a;    /* Blue Grey 500 */
  --loading-message-text: #ffffff;  /* White text for loading messages */
  --loading-message-border: #455a64;/* Blue Grey 600 */
}


/* Legacy Theme: "legacy-orange-blue" */
html[data-base-theme="legacy-orange-blue"][data-mode="light"] {
  /* Copied from :root */
  --color-honey-neutral: #E6C88C;
  --color-terra-cotta:  #B7525E;
  --color-mocha-mousse: #A47864;

  --glass-light-bg:    rgba(255,255,255,0.15);
  --glass-light-border:rgba(255,255,255,0.30);
  --glass-dark-bg:     rgba(34,34,34,0.50);
  --glass-dark-border: rgba(255,255,255,0.30);
  --glass-light-bg-hover: rgba(255,255,255,0.25);
  --glass-dark-bg-hover: rgba(34,34,34,0.25);

  --gradient-page-start-color: #FFFFFF;
  --gradient-page-end-color: #F0F0F0;
  --header-text-color-light: #E0E0E0;
  --header-text-color: var(--header-text-color-light);

  --glass-bg-gradient-start-color: rgba(40, 58, 71, 0.65);
  --glass-bg-gradient-end-color: rgba(200, 100, 0, 0.55);
  --glass-border-color: rgba(255, 140, 0, 0.3);
  --glass-shadow-color-soft: rgba(0, 0, 0, 0.25);
  --glass-shadow-color-strong: rgba(0, 0, 0, 0.35);
  --glass-blur-intensity: 10px;
  --glass-text-color: #EAEAEA;
  --glass-heading-color: #FFA500;
  --glass-border-radius: 14px;

  --primary-color: #FFA500;
  --primary-hover-color: #FFB733;
  --on-primary-text-color: #1A2A3A;

  --text-color: var(--glass-text-color);
  --text-muted-color: #9EADBA;
  --background-color: transparent;
  --surface-color: transparent;
  --border-color: var(--glass-border-color);

  --button-glass-bg-start-color: rgba(50, 68, 81, 0.5);
  --button-glass-bg-end-color: rgba(210, 110, 10, 0.4);
  --button-glass-text-color: var(--glass-text-color);
  --button-border-color: var(--glass-border-color);

  --input-glass-bg-color: rgba(26, 42, 58, 0.5);
  --input-glass-text-color: var(--glass-text-color);
  --input-glass-border-color: var(--glass-border-color);

  --accent-color-success: #28a745;
  --accent-color-warning: #b8860b;
  --accent-color-warning-text: var(--glass-text-color);
  --accent-color-info: #17a2b8;

  --disabled-bg-color: #495057;
  --disabled-text-color: #adb5bd;
  --footer-bg-color: #212529;
  --footer-text-color: #ced4da;
  --link-color: #FFB733;
  --link-hover-color: #FFA500;

  --loading-message-bg: var(--accent-color-info);
  --loading-message-text: var(--glass-text-color);
  --loading-message-border: #106777;
  --error-message-bg: #58181F;
  --error-message-text: #F8D7DA;
  --error-message-border: #721c24;

  --font-family-sans-serif: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
  --font-family-monospace: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  --spacing-unit: 8px;
  --border-radius: var(--glass-border-radius);
  --max-content-width: 1280px;

  /* Light mode specific overrides from default-orange-blue light mode */
  --bg-page:      #FFFFFF;
  --bg-section:   #F7F3EF;
  --text-primary: #000000;
  --header-text-color: var(--text-primary); /* Override for light mode header text */
}

html[data-base-theme="legacy-orange-blue"][data-mode="light"] .table-responsive td {
    background-color: #757575;
}

html[data-base-theme="legacy-orange-blue"][data-mode="light"] .table-responsive td.team-specific-cell {
    background-color: color-mix(in srgb, var(--team-bg-color, #808080) 50%, #404040) !important;
}

html[data-base-theme="legacy-orange-blue"][data-mode="light"] .table-responsive tbody tr:hover td {
    background-color: color-mix(in srgb, #757575 85%, var(--primary-hover-color, #FFB733) 15%);
}

html[data-base-theme="legacy-orange-blue"][data-mode="light"] .table-responsive tbody tr:hover td.team-specific-cell {
    background-color: color-mix(in srgb, var(--team-bg-color, #808080) 60%, #303030) !important;
}

html[data-base-theme="legacy-orange-blue"][data-mode="light"] .table-responsive th {
    color: var(--text-primary) !important;
    text-shadow: none;
}

html[data-base-theme="legacy-orange-blue"][data-mode="light"] section > h3 {
    color: var(--text-primary) !important;
}

html[data-base-theme="legacy-orange-blue"][data-mode="light"] section > h4 {
    color: var(--text-primary) !important;
}


html[data-base-theme="legacy-orange-blue"][data-mode="dark"] {
  /* Copied from html[data-base-theme="default-orange-blue"][data-mode="dark"] */
  --bg-page:    #000000;
  --bg-section: #121212;
  --text-primary: #FFFFFF;

  --gradient-page-start-color: #000000;
  --gradient-page-end-color: #1A1A1A;
  --header-text-color: #F0F0F0;

  --glass-bg-gradient-start-color: rgba(20, 28, 35, 0.7);
  --glass-bg-gradient-end-color: rgba(130, 65, 0, 0.6);
  --glass-border-color: rgba(200, 100, 0, 0.25);
  --glass-shadow-color-soft: rgba(0, 0, 0, 0.35);
  --glass-shadow-color-strong: rgba(0, 0, 0, 0.45);
  --glass-text-color: #F5F5F5;
  --glass-heading-color: #FFB74D;

  --primary-color: #FFB74D;
  --primary-hover-color: #FFC777;
  --on-primary-text-color: #1A2A3A;

  --text-color: var(--glass-text-color);
  --text-muted-color: #AEBAC7;
  --border-color: var(--glass-border-color);

  --button-glass-bg-start-color: rgba(30, 38, 45, 0.6);
  --button-glass-bg-end-color: rgba(140, 75, 10, 0.5);
  --button-glass-text-color: var(--glass-text-color);
  --button-border-color: var(--glass-border-color);

  --input-glass-bg-color: rgba(16, 22, 38, 0.6);
  --input-glass-text-color: var(--glass-text-color);
  --input-glass-border-color: var(--glass-border-color);

  --accent-color-success: #39C15D;
  --accent-color-warning: #FFC107;
  --accent-color-warning-text: #1A2A3A;
  --accent-color-info: #3EACCF;

  --disabled-bg-color: #3A3A3A;
  --disabled-text-color: #888888;
  --footer-bg-color: #1A1A1A;
  --footer-text-color: #BBBBBB;
  --link-color: #FFC777;
  --link-hover-color: #FFB74D;

  --loading-message-bg: var(--accent-color-info);
  --loading-message-text: var(--glass-text-color);
  --loading-message-border: color-mix(in srgb, var(--accent-color-info) 80%, #000);
  --error-message-bg: #7A282F;
  --error-message-text: #FADADD;
  --error-message-border: #A53842;
}

html[data-base-theme="legacy-orange-blue"][data-mode="dark"] .glass-card {
  background: var(--glass-dark-bg, rgba(34, 34, 34, 0.50)); /* Kept for legacy */
  border: 1px solid var(--glass-dark-border, rgba(255, 255, 255, 0.30)); /* Kept for legacy */
  background-color: rgba(34, 34, 34, 0.85); /* Kept for legacy */
}

html[data-base-theme="legacy-orange-blue"][data-mode="dark"] .glass-card h2,
html[data-base-theme="legacy-orange-blue"][data-mode="dark"] .glass-card h3,
html[data-base-theme="legacy-orange-blue"][data-mode="dark"] .glass-card h4 {
  color: var(--glass-heading-color); /* Kept for legacy */
}

html[data-base-theme="legacy-orange-blue"][data-mode="dark"] .glass-card p,
html[data-base-theme="legacy-orange-blue"][data-mode="dark"] .glass-card li,
html[data-base-theme="legacy-orange-blue"][data-mode="dark"] .glass-card span {
  color: var(--glass-text-color); /* Kept for legacy */
}

html[data-base-theme="legacy-orange-blue"][data-mode="dark"] .table-responsive td.team-specific-cell {
  background-color: color-mix(in srgb, var(--team-bg-color, transparent) 30%, transparent) !important; /* Kept for legacy */
}

html[data-base-theme="legacy-orange-blue"][data-mode="dark"] header {
  color: var(--header-text-color); /* Kept for legacy */
}

html[data-base-theme="legacy-orange-blue"][data-mode="dark"] button.success,
html[data-base-theme="legacy-orange-blue"][data-mode="dark"] .button.success {
  color: var(--on-primary-text-color); /* Kept for legacy */
}

html[data-base-theme="legacy-orange-blue"][data-mode="dark"] input[type="text"],
html[data-base-theme="legacy-orange-blue"][data-mode="dark"] input[type="number"],
html[data-base-theme="legacy-orange-blue"][data-mode="dark"] textarea {
  border-color: var(--glass-dark-border); /* Kept for legacy */
  background: var(--glass-dark-bg); /* Kept for legacy */
  color: var(--text-primary); /* Kept for legacy */
}

html[data-base-theme="legacy-orange-blue"][data-mode="dark"] select {
  border-color: var(--glass-dark-border); /* Kept for legacy */
  background: var(--glass-dark-bg); /* Kept for legacy */
  color: var(--text-primary); /* Kept for legacy */
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath fill='none' stroke='%23eee' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3E%3C/svg%3E"); /* Kept for legacy */
}

html[data-base-theme="legacy-orange-blue"][data-mode="dark"] select:hover {
  background: var(--glass-dark-bg-hover); /* Kept for legacy */
  border-color: var(--primary-hover-color); /* Kept for legacy */
}

html[data-base-theme="legacy-orange-blue"][data-mode="dark"] select:focus,
html[data-base-theme="legacy-orange-blue"][data-mode="dark"] input[type="text"]:focus,
html[data-base-theme="legacy-orange-blue"][data-mode="dark"] input[type="number"]:focus,
html[data-base-theme="legacy-orange-blue"][data-mode="dark"] textarea:focus {
  box-shadow: 0 0 0 0.25rem color-mix(in srgb, var(--primary-color) 30%, transparent); /* Kept for legacy */
  background: var(--glass-dark-bg-hover); /* Kept for legacy */
}

html[data-base-theme="legacy-orange-blue"][data-mode="dark"] input[type="radio"],
html[data-base-theme="legacy-orange-blue"][data-mode="dark"] input[type="checkbox"] {
  accent-color: var(--primary-color); /* Kept for legacy */
}

/* End Legacy Theme */

/* Default Orange Blue theme specific overrides */
html[data-base-theme="default-orange-blue"][data-mode="light"] {
  /* This block defines mode-specific overrides for light mode.
     Most common variables are now inherited directly from :root,
     which defines the light mode baseline. */
  --bg-page:      #FFFFFF;
  --bg-section:   #F7F3EF;
  --text-primary: #000000; /* Black text for primary content in light mode */
  --header-text-color: var(--text-primary); /* MODIFIED: Ensure header text is black in light mode */

  /* The following variables are essentially re-stating what's in :root 
     or are part of the :root definition of the light theme.
     They are removed for clarity and to rely on :root as the source of truth for light mode defaults.
     If light mode needs to specifically differ from the :root base, those overrides would remain.
  */

  /* Light Mode Table Cell Backgrounds for White Text */
  /* General table data cells in Light Mode */
  /* This rule needs to be specific enough to override .table-responsive background-color */
}

html[data-base-theme="default-orange-blue"][data-mode="light"] .table-responsive td {
    /* color: #FFFFFF !important; /* This is already globally set on 'th, td' and is inherited */
    background-color: #757575; /* Dark grey background for general cells */
}

/* Team-specific table data cells in Light Mode */
html[data-base-theme="default-orange-blue"][data-mode="light"] .table-responsive td.team-specific-cell {
    /* color: #FFFFFF !important; /* This is already globally set on 'th, td' and is inherited */
    background-color: color-mix(in srgb, var(--team-bg-color, #808080) 50%, #404040) !important; /* Darker team-tinted background */
}

/* Hover state for general td cells in light mode - ensure it contrasts with white text */
html[data-base-theme="default-orange-blue"][data-mode="light"] .table-responsive tbody tr:hover td {
    /* Ensure this doesn't get overridden by a more specific team-specific-cell hover rule if not intended */
    background-color: color-mix(in srgb, #757575 85%, var(--primary-hover-color, #FFB733) 15%); /* Slightly tint the dark grey with primary color on hover */
}

/* Hover state for team-specific td cells in light mode - ensure it contrasts with white text */
html[data-base-theme="default-orange-blue"][data-mode="light"] .table-responsive tbody tr:hover td.team-specific-cell {
    background-color: color-mix(in srgb, var(--team-bg-color, #808080) 60%, #303030) !important; /* Darker hover mix for team specific cells */
}

/* Original commented out variables from light theme for reference, can be fully deleted */
/*html[data-base-theme="default-orange-blue"][data-mode="light"] {*/
/* Closing the empty or nearly empty light mode block from previous refactoring correctly */

/* Light Mode Table Header Specific Styles */
html[data-base-theme="default-orange-blue"][data-mode="light"] .table-responsive th {
    color: var(--text-primary) !important; /* Black text in Light Mode */
    text-shadow: none; /* Remove shadow previously added for white text */
}

/*html[data-base-theme="default-orange-blue"][data-mode="light"] {*/
  /*  
  --gradient-page-start-color: #D2691E; 
  --gradient-page-end-color: #2C3E50;   
  /* --header-text-color: #E0E0E0; /* This line is effectively replaced by the one above */
/*
  --glass-bg-gradient-start-color: rgba(40, 58, 71, 0.65);  
  --glass-bg-gradient-end-color: rgba(200, 100, 0, 0.55); 
  --glass-border-color: rgba(255, 140, 0, 0.3); 
  --glass-shadow-color-soft: rgba(0, 0, 0, 0.25);
  --glass-shadow-color-strong: rgba(0, 0, 0, 0.35);
  --glass-blur-intensity: 10px; 
  --glass-text-color: #EAEAEA;     
  --glass-heading-color: #FFA500;  
  --glass-border-radius: 14px;

  --primary-color: #FFA500; 
  --primary-hover-color: #FFB733; 
  --on-primary-text-color: #1A2A3A; 

  --text-color: var(--glass-text-color);
  --text-muted-color: #9EADBA; 
  --background-color: transparent; 
  --surface-color: transparent;    
  --border-color: var(--glass-border-color); 
  
  --button-glass-bg-start-color: rgba(50, 68, 81, 0.5);
  --button-glass-bg-end-color: rgba(210, 110, 10, 0.4);
  --button-glass-text-color: var(--glass-text-color);
  --button-border-color: var(--glass-border-color);

  --input-glass-bg-color: rgba(26, 42, 58, 0.5); 
  --input-glass-text-color: var(--glass-text-color);
  --input-glass-border-color: var(--glass-border-color);

  --accent-color-success: #28a745; 
  --accent-color-warning: #b8860b;
  --accent-color-warning-text: var(--glass-text-color);
  --accent-color-info: #17a2b8; 
  
  --disabled-bg-color: #495057;
  --disabled-text-color: #adb5bd;
  --footer-bg-color: #212529;
  --footer-text-color: #ced4da;
  --link-color: #FFB733; 
  --link-hover-color: #FFA500; 

  --loading-message-bg: var(--accent-color-info);
  --loading-message-text: var(--glass-text-color);
  --loading-message-border: #106777;
  --error-message-bg: #58181F;
  --error-message-text: #F8D7DA;
  --error-message-border: #721c24;
  */

html[data-base-theme="default-orange-blue"][data-mode="dark"] {
  --bg-page:    #000000; /* Changed from #1E1E1E to pure black */
  --bg-section: #121212; /* This remains a dark gray for contrast */
  --text-primary: #FFFFFF;

  --gradient-page-start-color: #000000;   /* Black - For new dark mode gradient */
  --gradient-page-end-color: #1A1A1A;     /* Dark Grey - For new dark mode gradient */
  --header-text-color: #F0F0F0; /* Header text for this mode */

  --glass-bg-gradient-start-color: rgba(20, 28, 35, 0.7);  /* Very Dark Slate Blue */
  --glass-bg-gradient-end-color: rgba(130, 65, 0, 0.6); /* Very Dark Orange */
  --glass-border-color: rgba(200, 100, 0, 0.25); /* Muted Dark Orange */
  --glass-shadow-color-soft: rgba(0, 0, 0, 0.35);
  --glass-shadow-color-strong: rgba(0, 0, 0, 0.45);
  /* --glass-blur-intensity: 10px; (can inherit or be redefined) */
  --glass-text-color: #F5F5F5;     /* Lighter Gray */
  --glass-heading-color: #FFB74D;  /* Brighter Orange */
  /* --glass-border-radius: 14px; (can inherit) */

  --primary-color: #FFB74D; /* Brighter Orange */
  --primary-hover-color: #FFC777; 
  --on-primary-text-color: #1A2A3A; 

  --text-color: var(--glass-text-color);
  --text-muted-color: #AEBAC7; 
  /* --background-color: transparent; (already set in :root) */
  /* --surface-color: transparent; (already set in :root) */
  --border-color: var(--glass-border-color); 
  
  --button-glass-bg-start-color: rgba(30, 38, 45, 0.6);
  --button-glass-bg-end-color: rgba(140, 75, 10, 0.5);
  --button-glass-text-color: var(--glass-text-color);
  --button-border-color: var(--glass-border-color);

  --input-glass-bg-color: rgba(16, 22, 38, 0.6); 
  --input-glass-text-color: var(--glass-text-color);
  --input-glass-border-color: var(--glass-border-color);

  --accent-color-success: #39C15D; /* Brighter Green */
  --accent-color-warning: #FFC107; /* Standard Yellow, more visible */
  --accent-color-warning-text: #1A2A3A; /* Darker text for yellow */
  --accent-color-info: #3EACCF; /* Brighter Info Blue */
  
  --disabled-bg-color: #3A3A3A;
  --disabled-text-color: #888888;
  --footer-bg-color: #1A1A1A;
  --footer-text-color: #BBBBBB;
  --link-color: #FFC777; 
  --link-hover-color: #FFB74D; 

  --loading-message-bg: var(--accent-color-info);
  --loading-message-text: var(--glass-text-color);
  --loading-message-border: color-mix(in srgb, var(--accent-color-info) 80%, #000);
  --error-message-bg: #7A282F;
  --error-message-text: #FADADD;
  --error-message-border: #A53842;
}

html[data-base-theme="default-orange-blue"][data-mode="dark"] .glass-card {
  background: var(--glass-dark-bg, rgba(34, 34, 34, 0.50)); 
  border: 1px solid var(--glass-dark-border, rgba(255, 255, 255, 0.30)); 
  background-color: rgba(34, 34, 34, 0.85); 
  /* These specific overrides for default-orange-blue dark .glass-card are now less relevant */
  /* as the new --panel-bg, --panel-border-color should be used by .glass-card directly */
  /* Keeping them for now to ensure legacy theme isn't broken, but they should be reviewed/removed if .glass-card is fully refactored */
}

html[data-base-theme="default-orange-blue"][data-mode="dark"] .glass-card h2,
html[data-base-theme="default-orange-blue"][data-mode="dark"] .glass-card h3,
html[data-base-theme="default-orange-blue"][data-mode="dark"] .glass-card h4 {
  color: var(--glass-heading-color); 
}
html[data-base-theme="default-orange-blue"][data-mode="dark"] .glass-card p,
html[data-base-theme="default-orange-blue"][data-mode="dark"] .glass-card li,
html[data-base-theme="default-orange-blue"][data-mode="dark"] .glass-card span {
  color: var(--glass-text-color);
}

/* Dark Mode: Team-specific table cell background override for default-orange-blue theme */
html[data-base-theme="default-orange-blue"][data-mode="dark"] .table-responsive td.team-specific-cell {
  background-color: color-mix(in srgb, var(--team-bg-color, transparent) 30%, transparent) !important;
}


/* Global Resets & Defaults */
*,
*::before,
*::after {
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  font-family: var(--font-family, var(--font-family-sans-serif));
  font-size: var(--font-size);
  background: linear-gradient(135deg, var(--bg-accent) 0%, var(--bg-secondary) 100%);
  color: var(--text-light);
  margin: 0;
  padding: 0;
  overflow-x: hidden;
  transition: background 0.5s, color 0.5s;
  line-height: 1.65; 
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  min-height: 100vh;
}

/* Removing pageGradientAnimation as the new body background is a static gradient */
/*
@keyframes pageGradientAnimation {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}
*/

#root {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  background-color:transparent; /* Ensure #root is transparent */
}

/* App Container */
#app-container {
  max-width: var(--max-content-width);
  margin: 0 auto;
  padding: calc(var(--spacing-unit) * 2) calc(var(--spacing-unit) * 3);
  width: 100%;
  flex-grow: 1;
}

/* Header */
header {
  background: var(--panel-bg);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px); /* For Safari */
  color: var(--text-light);
  padding: 20px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-size: 26px; /* This will apply to text directly in header, not necessarily h1 if it has its own size */
  font-weight: 500;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  transition: background 0.5s, color 0.5s;
  /* Removed: text-align, border-radius, margin-bottom, border-bottom from previous styling */
  /* Retained for context, child h1 will primarily use its own styling for font size/weight */
}

header h1 {
  margin: 0; /* Keep margin 0 for h1 inside flex header */
  font-size: 1.8rem; /* Adjust h1 font size if needed, relative to header's 26px */
  font-weight: 700; /* Keep or adjust as per design for h1 */
  letter-spacing: -0.5px;
  color: var(--header-text-color, var(--text-light)); /* Fallback to text-light if header-text-color not defined */
}

/* Sections */
section {
  margin-bottom: calc(var(--spacing-unit) * 4); 
  /* Styles removed as GlassCard is used */
}

section h2 {
  margin-top: 0;
  margin-bottom: calc(var(--spacing-unit) * 2.5); 
  color: var(--glass-heading-color); /* This was already changed as per previous plan */
  border-bottom: 2px solid var(--primary-color); /* CHANGED from 3px to 2px */
  padding-bottom: calc(var(--spacing-unit) * 1.5); 
  font-size: 1.85rem; 
  font-weight: 600;
}

section h3 {
  margin-top: calc(var(--spacing-unit) * 2); 
  margin-bottom: calc(var(--spacing-unit) * 1.5); 
  font-size: 1.5rem; 
  color: var(--glass-text-color); /* Use glass text color */
  font-weight: 600;
}

section h4 {
  margin-top: var(--spacing-unit) * 1.5; 
  margin-bottom: var(--spacing-unit); 
  font-size: 1.2rem; 
  color: var(--text-muted-color); /* Use general muted text */
  font-weight: 600;
}

/* Fix for h3 elements directly under section in Light Mode */
html[data-base-theme="default-orange-blue"][data-mode="light"] section > h3 {
    color: var(--text-primary) !important; /* --text-primary is black in light mode */
    /* text-shadow: none; /* Optional: remove any shadow if previously applied */
}

/* Fix for h4 elements directly under section in Light Mode */
html[data-base-theme="default-orange-blue"][data-mode="light"] section > h4 {
    color: var(--text-primary) !important; /* --text-primary is black in light mode */
    /* text-shadow: none; /* Optional: remove any shadow if previously applied */
}

/* Generic Table Styling for Glassmorphism */
.table-responsive {
  overflow-x: auto;
  width: 100%;
  margin-top: calc(var(--spacing-unit) * 2);
  border-radius: calc(var(--glass-border-radius) - 8px); /* Keep this from previous glass refinement */
  overflow: hidden; 
  background-color: color-mix(in srgb, var(--glass-bg-gradient-start-color) 15%, transparent); /* UPDATED */
  border: 1px solid var(--glass-border-color);
}
table {
  width: 100%;
  border-collapse: separate; 
  border-spacing: 0;
  background-color: transparent;
}

th, td {
  padding: calc(var(--spacing-unit) * 1.5);
  text-align: left;
  vertical-align: middle;
  border: none; 
  border-bottom: 1px solid var(--glass-border-color); 
  color: #FFFFFF !important; /* MODIFIED: Set to white for all modes */
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); /* MODIFIED: Soft black shadow for white text */
}

/* New rule for cells that will display team colors */
td.team-specific-cell {
  background-color: color-mix(in srgb, var(--team-bg-color, transparent) 15%, transparent) !important; /* MODIFIED for 0.15 opacity */
  color: #FFFFFF !important; /* MODIFIED: Set to white for all modes */
  font-weight: 600; /* Make team names a bit bolder */
}
/* Ensure specificity if other td styles might override background/color */
.table-responsive tbody tr:hover td.team-specific-cell {
    /* Keeping hover effect distinct, might need future review for opacity on hover */
    background-color: color-mix(in srgb, var(--team-bg-color, transparent) 25%, var(--primary-color) 20%) !important; /* Adjusted hover opacity slightly */
}

td:first-child, th:first-child {
    padding-left: calc(var(--spacing-unit) * 2); 
}
td:last-child, th:last-child {
    padding-right: calc(var(--spacing-unit) * 2);
}

th {
  /* background: linear-gradient(135deg, var(--glass-bg-gradient-start-color), var(--glass-bg-gradient-end-color)); /* REMOVED old gradient */
  background-color: color-mix(in srgb, var(--glass-bg-gradient-end-color) 20%, transparent); /* UPDATED */
  color: #FFFFFF !important; /* MODIFIED: Set to white for all modes (ensure it overrides th, td rule if needed, though !important on td,th might cover) */
  font-weight: 700;
  white-space: nowrap;
  border-bottom-width: 2px; 
  border-bottom-color: var(--primary-color); /* Kept as per instruction */
}

tbody tr:nth-child(even) {
  /* background-color: color-mix(in srgb, var(--glass-bg-gradient-start-color) 10%, transparent); /* REMOVED old striping */
  background-color: transparent; /* UPDATED - removing striping */
}

tbody tr:hover {
  /* background-color: color-mix(in srgb, var(--primary-color) 20%, var(--glass-bg-gradient-end-color) 30%); /* REMOVED old hover */
  background-color: color-mix(in srgb, var(--primary-color) 15%, transparent); /* UPDATED */
}

table caption {
  caption-side: top;
  font-size: 1.1em;
  font-weight: 600;
  color: var(--text-muted-color);
  padding: var(--spacing-unit);
  text-align: left;
}

/* Form Elements / Control Panels */
.analysis-controls,
.qualification-path-controls,
.simulation-controls {
  max-width: 700px;
  margin: 30px auto;
  padding: calc(var(--spacing-unit) * 2); /* approx 16px, close to 20px */
  background: var(--panel-bg);
  border-radius: 16px; /* Use new panel radius */
  border: 1px solid var(--panel-border-color);
  box-shadow: var(--panel-box-shadow);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  display: flex;
  flex-direction: column; /* Changed from flex-wrap: wrap */
  align-items: stretch; /* Changed from align-items: center */
  /* gap: calc(var(--spacing-unit) * 2.5); /* Removed, children should manage their own margins/spacing */
}

/* General Label Styling */
label {
  display: block;
  font-weight: 500;
  margin-bottom: 6px;
  color: var(--text-light);
}

.control-group {
  display: flex;
  align-items: center;
  gap: var(--spacing-unit); 
}

/* Specific label styling within control groups, inherits from general label */
.control-group label, fieldset legend {
  font-weight: 600; /* Slightly more prominent for control groups/legends */
  color: var(--text-light); /* Updated from --glass-text-color */
  margin-right: calc(var(--spacing-unit) * 0.5); /* Kept for inline spacing if needed */
  /* font-size: 0.95em; /* Removed to allow global font sizing or more specific control */
}
fieldset {
    border: none;
    padding: 0;
    margin: 0;
    background: transparent; /* Ensure fieldset itself is transparent */
}
fieldset.control-group { 
    gap: var(--spacing-unit) * 1.5; 
}
fieldset legend {
    padding: 0 0 calc(var(--spacing-unit) * 0.5) 0; 
    margin-bottom: calc(var(--spacing-unit) * 0.5);
}

select,
input[type="text"],
input[type="number"],
textarea {
  padding: 10px;
  border-radius: 6px;
  border: 1px solid var(--input-border-color);
  background: var(--bg-light); /* Themed for light/dark */
  font-size: 16px;
  color: var(--text-primary);
  transition: border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out, background-color 0.2s ease, background 0.2s ease;
  min-width: 180px;
  box-shadow: inset 0 1px 2px rgba(0,0,0,0.075);
  box-sizing: border-box;
  /* Removed backdrop-filter from here */
}

select {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath fill='none' stroke='%23333' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right calc(var(--spacing-unit) * 1.5) center;
  background-size: 1em;
  padding-right: calc(var(--spacing-unit) * 4); /* Ensure space for arrow */
}

html[data-base-theme="new-theme"][data-mode="dark"] select {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath fill='none' stroke='%23eee' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3E%3C/svg%3E"); /* Dark mode arrow */
}

select:hover,
input[type="text"]:hover,
input[type="number"]:hover,
textarea:hover {
  border-color: var(--thumb-border); /* Consistent hover border */
}

select:focus,
input[type="text"]:focus,
input[type="number"]:focus,
textarea:focus {
  border-color: var(--thumb-border); /* Themed border color on focus */
  outline: 0;
  box-shadow: 0 0 0 0.2rem color-mix(in srgb, var(--thumb-border) 25%, transparent);
}

input[type="radio"],
input[type="checkbox"] {
  margin-right: calc(var(--spacing-unit) * 0.75); 
  accent-color: var(--primary-color); 
  transform: scale(1.1); 
}

.control-group label[for*="-radio"],
.control-group label[for*="-checkbox"] {
  margin-right: var(--spacing-unit); 
  font-weight: normal; 
  color: var(--text-light); /* Updated from --glass-text-color */
}

button, .button {
  padding: 10px 20px; 
  border: 1px solid var(--thumb-border); /* Default uses light thumb-border */
  border-radius: 8px; 
  background-color: var(--panel-bg); /* Default uses light panel-bg */
  color: var(--text-light); /* Default uses light text-light */
  font-size: 16px;
  font-weight: 500; 
  cursor: pointer;
  transition: background-color 0.3s, box-shadow 0.3s, border-color 0.3s;
  text-align: center;
  display: inline-block;
  text-decoration: none;
  white-space: nowrap; 
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  /* backdrop-filter: blur(calc(var(--glass-blur-intensity) / 2)); Removed */
  /* -webkit-backdrop-filter: blur(calc(var(--glass-blur-intensity) / 2)); Removed */
}
button:hover, .button:hover {
  background-color: var(--bg-accent); /* Light theme hover */
  border-color: var(--bg-accent);
  box-shadow: 0 4px 8px rgba(0,0,0,0.15);
}
button:active, .button:active {
    transform: translateY(1px);
    box-shadow: 0 1px 2px rgba(0,0,0,0.2); /* Adjusted shadow for active state */
}
button:focus-visible, .button:focus-visible { 
  outline: 2px solid var(--primary-color); /* Fallback primary color, should be themed */
  outline-offset: 2px;
  box-shadow: 0 0 0 0.25rem color-mix(in srgb, var(--primary-color, #A8E6CF) 30%, transparent);
}

button:disabled, .button:disabled {
  background-color: #CCCCCC !important; /* More specific than old theme disabled */
  color: #595959 !important;
  border-color: #BDBDBD !important;
  cursor: not-allowed;
  opacity: 0.7; 
  box-shadow: none;
  transform: none;
  /* backdrop-filter: none; Already removed from base */
}

button.success, .button.success {
  background-color: var(--accent-color-success);
  border-color: var(--accent-color-success);
  color: #fff; /* Assuming white text for success buttons */
}
button.success:hover, .button.success:hover {
  background-color: color-mix(in srgb, var(--accent-color-success) 85%, #000);
  border-color: color-mix(in srgb, var(--accent-color-success) 85%, #000);
}
button.warning, .button.warning {
  background-color: var(--accent-color-warning);
  border-color: var(--accent-color-warning);
  color: var(--accent-color-warning-text); 
}
button.warning:hover, .button.warning:hover {
  background-color: color-mix(in srgb, var(--accent-color-warning) 85%, #000);
  border-color: color-mix(in srgb, var(--accent-color-warning) 85%, #000);
}

input[type="submit"] {
  display: block; /* Make it block to take full width */
  width: 100%;
  padding: 10px 20px;
  font-size: 16px;
  font-weight: 500;
  color: var(--text-light); /* Default light theme text */
  background-color: var(--bg-accent); /* Light theme submit bg */
  border: 1px solid var(--bg-accent); /* Light theme submit border */
  border-radius: 8px;
  cursor: pointer;
  transition: background-color 0.3s, box-shadow 0.3s, border-color 0.3s;
  text-align: center;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

input[type="submit"]:hover {
  background-color: var(--submit-light-hover-bg); /* Light theme hover */
  border-color: var(--submit-light-hover-bg);
  box-shadow: 0 4px 8px rgba(0,0,0,0.15);
}

/* Utilities */
.text-center { text-align: center; }
.mb-1 { margin-bottom: var(--spacing-unit); } 
.mb-2 { margin-bottom: calc(var(--spacing-unit) * 2); } 
.mb-3 { margin-bottom: calc(var(--spacing-unit) * 3); } 
.mt-1 { margin-top: var(--spacing-unit); }
.mt-2 { margin-top: calc(var(--spacing-unit) * 2); }
.mt-3 { margin-top: calc(var(--spacing-unit) * 3); }
.text-warning { 
  color: var(--accent-color-warning-text); 
  background-color: color-mix(in srgb, var(--accent-color-warning) 70%, transparent); 
  padding: var(--spacing-unit); 
  border-radius: var(--border-radius); 
  border: 1px solid var(--accent-color-warning);
}

/* Glass Card Component Style / Panel Style */
.glass-card {
  background: var(--panel-bg);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border: 1px solid var(--panel-border-color);
  border-radius: 16px; /* Updated from 14px */
  padding: 20px; /* Updated from calc(var(--spacing-unit) * 2.5) */
  box-shadow: var(--panel-box-shadow);
  color: var(--text-primary); 
  margin: 20px; /* Added default margin */
  transition: background 0.5s, border-color 0.5s, box-shadow 0.5s;
  /* Removed old background-color fallback, var(--glass-light-bg), var(--glass-light-border) */
}
.glass-card h2, .glass-card h3, .glass-card h4 {
  color: var(--text-primary); 
}
.glass-card p, .glass-card li, .glass-card span {
  color: var(--text-primary); 
}

/* Analysis Panel Specific Styles in index.css - to be reviewed if it should use custom-styles.css or be merged */
/* This rule for .analysis-panel-card is currently in index.css using old variables. */
/* It will be overridden by custom-styles.css if specific enough, or should be updated here. */
/* For now, changing its background to use the new panel variable. */
.analysis-panel-card {
  background: var(--panel-bg); /* Updated to use new panel background */
  /* Other properties like padding, border-radius, etc., would come from .glass-card if applied together */
}

/* Headings inside .analysis-panel-card will now default to var(--text-primary) from .glass-card rules */
/* Specific color overrides for these headings were in custom-styles.css and will be addressed there. */
/* .analysis-panel-card h2, */
/* .analysis-panel-card h3 { */
  /* color: var(--color-mocha-mousse); */ /* Old style from index.css */
/* } */
/* Fallback if --color-mocha-mousse is not defined, or to ensure it overrides general glass-card heading colors */
/* .analysis-panel-card h2 { */
  /* color: var(--color-mocha-mousse, #A47864); */ 
/* } */
/* .analysis-panel-card h3 { */
  /* color: var(--color-mocha-mousse, #A47864); */
/* } */


/* Current Standings Metadata */
#current-standings .metadata p {
  margin-bottom: calc(var(--spacing-unit) * 0.75); 
  font-size: 0.9em;
  color: var(--text-muted-color);
}

/* Scenario Simulation Specifics */
#scenario-simulation .simulation-message {
  margin-top: var(--spacing-unit);
  padding: calc(var(--spacing-unit) * 1.5); 
  background-color: color-mix(in srgb, var(--accent-color-warning) 70%, transparent); 
  border: 1px solid var(--accent-color-warning); 
  border-radius: var(--border-radius);
  color: var(--accent-color-warning-text); 
  font-weight: 500;
}

#scenario-simulation .simulation-results-container {
  display: flex;
  gap: calc(var(--spacing-unit) * 3); 
  margin-top: calc(var(--spacing-unit) * 2.5); 
  flex-wrap: wrap;
}

#scenario-simulation .match-log-container,
#scenario-simulation .final-standings-container {
  flex: 1;
  min-width: 320px; 
  /* Uses GlassCard, so no specific bg/border/shadow here */
}

#scenario-simulation textarea {
  width: 100%;
  padding: var(--spacing-unit); 
  border-radius: calc(var(--glass-border-radius) / 2);
  border: 1px solid var(--input-glass-border-color); 
  font-family: var(--font-family-monospace);
  font-size: 0.95em; 
  background-color: var(--input-glass-bg-color); 
  color: var(--input-glass-text-color); 
  min-height: 250px; 
  resize: vertical;
  box-shadow: inset 0 1px 2px rgba(0,0,0,0.075);
  backdrop-filter: blur(calc(var(--glass-blur-intensity) / 3));
  -webkit-backdrop-filter: blur(calc(var(--glass-blur-intensity) / 3));
}

/* Qualification Path Specifics */
#qualification-path .qualification-path-results p {
  margin-bottom: var(--spacing-unit);
  font-size: 1.05em; 
}
#qualification-path .qualification-path-results strong {
  color: var(--primary-hover-color);
}
#qualification-path .metadata .text-warning { 
    font-size: 0.9em;
    margin-top: var(--spacing-unit);
}

/* Chart Container (OverallProbabilities) */
#overall-probabilities > div > div[style*="flex: 1"] { /* Targets the flex children from OverallProbabilities */
    /* Uses GlassCard, so no specific bg/border/shadow here */
    padding: var(--spacing-unit); /* Keep padding if needed around chart canvas */
}
#overall-probabilities .metadata p {
  margin-bottom: calc(var(--spacing-unit) * 0.75); 
  font-size: 0.9em;
  color: var(--text-muted-color);
}


/* Footer */
footer {
  text-align: center;
  padding: calc(var(--spacing-unit) * 3) 0; 
  margin-top: calc(var(--spacing-unit) * 4); 
  background-color: color-mix(in srgb, var(--glass-text-color) 85%, transparent); /* Darker, themed footer */
  color: var(--gradient-page-start-color); /* Contrasting text */
  border-top: 3px solid var(--primary-color);
}
footer p {
  margin: calc(var(--spacing-unit) * 0.5) 0; 
  font-size: 0.9em;
}

/* ARIA Live Regions - Basic Styling for Visibility */
p[role="status"], p[role="alert"] { 
    padding: calc(var(--spacing-unit) * 1.5);
    margin-top: var(--spacing-unit);
    border-radius: var(--border-radius);
    font-weight: 500;
    backdrop-filter: blur(var(--glass-blur-intensity));
    -webkit-backdrop-filter: blur(var(--glass-blur-intensity));
    border: 1px solid;
}
p[role="status"] { 
    background-color: color-mix(in srgb, var(--accent-color-info) 60%, transparent);
    color: var(--glass-text-color); 
    border-color: var(--accent-color-info); 
}
p[role="alert"] { 
    background-color: color-mix(in srgb, var(--error-message-bg) 60%, var(--glass-bg-gradient-start-color) 30%);
    color: var(--error-message-text); 
    border-color: var(--error-message-border); 
}

/* REMOVED old html[data-theme="light"] and html[data-theme="dark"] blocks */
/* New theme structure using data-base-theme and data-mode follows */

/* Specific overrides for dark mode elements */
/* html[data-theme="dark"] header rule for color was removed as h1 now handles its color directly via --header-text-color */

/* Specific overrides for legacy default-orange-blue dark mode elements */
/* These are mostly for inputs/selects, keeping them separate from new theme button logic */
html[data-base-theme="default-orange-blue"][data-mode="dark"] header {
  color: var(--header-text-color); 
}
html[data-base-theme="default-orange-blue"][data-mode="dark"] button.success, 
html[data-base-theme="default-orange-blue"][data-mode="dark"] .button.success {
  /* Legacy success button text color in dark mode */
  color: var(--on-primary-text-color); 
}
html[data-base-theme="default-orange-blue"][data-mode="dark"] input[type="text"],
html[data-base-theme="default-orange-blue"][data-mode="dark"] input[type="number"],
html[data-base-theme="default-orange-blue"][data-mode="dark"] textarea {
  border-color: var(--glass-dark-border);
  background: var(--glass-dark-bg);
  color: var(--text-primary); 
}
html[data-base-theme="default-orange-blue"][data-mode="dark"] select {
  border-color: var(--glass-dark-border);
  background: var(--glass-dark-bg);
  color: var(--text-primary); 
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath fill='none' stroke='%23eee' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3E%3C/svg%3E"); 
}
html[data-base-theme="default-orange-blue"][data-mode="dark"] select:hover {
  background: var(--glass-dark-bg-hover);
  border-color: var(--primary-hover-color);
}
html[data-base-theme="default-orange-blue"][data-mode="dark"] select:focus,
html[data-base-theme="default-orange-blue"][data-mode="dark"] input[type="text"]:focus,
html[data-base-theme="default-orange-blue"][data-mode="dark"] input[type="number"]:focus,
html[data-base-theme="default-orange-blue"][data-mode="dark"] textarea:focus {
  box-shadow: 0 0 0 0.25rem color-mix(in srgb, var(--primary-color) 30%, transparent);
  background: var(--glass-dark-bg-hover); 
}
html[data-base-theme="default-orange-blue"][data-mode="dark"] input[type="radio"],
html[data-base-theme="default-orange-blue"][data-mode="dark"] input[type="checkbox"] {
  accent-color: var(--primary-color); 
}

/* New Theme Dark Mode Button & Submit Overrides */
html[data-base-theme="new-theme"][data-mode="dark"] button,
html[data-base-theme="new-theme"][data-mode="dark"] .button {
  background-color: var(--button-dark-bg);
  border-color: var(--thumb-border); /* Dark theme thumb border */
  color: var(--text-light); /* Dark theme text light */
}

html[data-base-theme="new-theme"][data-mode="dark"] button:hover,
html[data-base-theme="new-theme"][data-mode="dark"] .button:hover {
  background-color: var(--button-dark-hover-bg);
  border-color: var(--button-dark-hover-bg);
}

html[data-base-theme="new-theme"][data-mode="dark"] input[type="submit"] {
  background-color: var(--thumb-border); /* Dark theme thumb border for submit bg */
  color: var(--text-light); /* Re-evaluate if contrast is good, maybe use panel-rgb based text */
  border-color: var(--thumb-border);
}

html[data-base-theme="new-theme"][data-mode="dark"] input[type="submit"]:hover {
  background-color: var(--button-dark-hover-bg);
  border-color: var(--button-dark-hover-bg);
}


/* Responsive adjustments */
@media (max-width: 992px) { /* Tablets */
  #app-container {
    padding: var(--spacing-unit) * 1.5; 
  }
  header h1 {
    font-size: 2rem; 
  }
  section h2 {
    font-size: 1.65rem; 
  }
  section h3 {
    font-size: 1.35rem; 
  }

  .analysis-controls,
  .qualification-path-controls,
  .simulation-controls {
    flex-direction: column;
    align-items: stretch; 
  }
  .control-group {
    flex-direction: column;
    align-items: flex-start;
    width: 100%;
  }
  .control-group label, .control-group fieldset legend {
    margin-bottom: calc(var(--spacing-unit) * 0.5); 
  }
  .control-group select, .control-group input[type="radio"] + label, .control-group input[type="checkbox"] + label {
    width: 100%;
  }
  fieldset.control-group label { 
    width: auto; 
    margin-bottom: 0;
  }

  #scenario-simulation .simulation-results-container {
    flex-direction: column;
  }
  #overall-probabilities > div[style*="flex-direction: row"] { 
    flex-direction: column !important; 
  }
  #overall-probabilities > div > div[style*="flex: 1"] {
      margin-bottom: var(--spacing-unit) * 2; 
  }
}

@media (max-width: 576px) { /* Small phones */
  body {
    font-size: 15px; 
  }
  #app-container {
    padding: var(--spacing-unit); 
  }
  header h1 {
    font-size: 1.75rem; 
  }
  section h2 {
    font-size: 1.5rem; 
  }
  section h3 {
    font-size: 1.25rem; 
  }
  th, td {
    padding: var(--spacing-unit); 
  }
  button, .button {
    width: 100%;
    margin-bottom: var(--spacing-unit); 
  }
  .analysis-controls button,
  .qualification-path-controls button,
  .simulation-controls button { 
      width: 100%;
  }

  select, input[type="text"], input[type="number"], textarea {
      font-size: 0.95em; 
  }
}
