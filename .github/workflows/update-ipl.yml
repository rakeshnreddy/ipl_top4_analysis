# .github/workflows/update-ipl.yml
 name: Update IPL Standings

 on:
   schedule:
     - cron: '0 19 * * *'    # 19:00 UTC â†’ 00:30 IST next day
   workflow_dispatch:

 jobs:
   update:
     runs-on: ubuntu-latest

     steps:
       - uses: actions/checkout@v3

       - name: Set up Python
         uses: actions/setup-python@v4
         with:
           python-version: "3.x"

       - name: Install dependencies
         run: |
           pip install requests pandas


       - name: Run scraper
         run: python extract_table.py  # now generates both current_standings.json and remaining_fixtures.json

       - name: Commit results
         run: |
           git config user.name  "github-actions[bot]"
           git config user.email "github-actions[bot]@users.noreply.github.com"

           git add current_standings.json remaining_fixtures.json
           git commit -m "Automated update: $(date +'%Y-%m-%d')" || echo "No changes to commit"

       - name: Push changes
         uses: ad-m/github-push-action@v0.6.0
         with:
           github_token: ${{ secrets.GITHUB_TOKEN }}
